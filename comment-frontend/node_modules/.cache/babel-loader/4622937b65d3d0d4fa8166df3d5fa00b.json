{"ast":null,"code":"import _classCallCheck from\"C:/Users/saylo/Documents/GitHub/ESOF432/comment-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/saylo/Documents/GitHub/ESOF432/comment-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/saylo/Documents/GitHub/ESOF432/comment-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/saylo/Documents/GitHub/ESOF432/comment-frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./index.css';import profile from'./profile.png';import AddReply from\"./AddReply\";import ApiService from\"./apiService\";import Replies from\"./Replies\";import EditComment from\"./EditComment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Comment=/*#__PURE__*/function(_Component){_inherits(Comment,_Component);var _super=_createSuper(Comment);function Comment(props){var _this;_classCallCheck(this,Comment);_this=_super.call(this,props);_this.state={replies:[],//r is sorted replies... I think\nr:[],showReplyForm:false,showEditForm:false};_this.fetchReplies=function(){return _this.apiService.getComments().then(function(_ref){var data=_ref.data;_this.setState({replies:data.comments});_this.findReplies();});};_this.storeReply=function(data){_this.apiService.storeComment(data).then(function(){_this.fetchReplies();_this.toggleShowReplyForm();});};_this.storeEdit=function(data){_this.apiService.updateComment(data).then(function(){_this.props.fetchComments();_this.toggleShowEditForm();});};_this.toggleShowReplyForm=function(){_this.setState({showReplyForm:!_this.state.showReplyForm});};_this.toggleShowEditForm=function(){_this.setState({showEditForm:!_this.state.showEditForm});};_this.findReplies=function(){var rep=[];for(var i=0;i<_this.state.replies.length;i++){if(_this.state.replies[i].parent_id!==null){if(_this.props.refinedComments.comment_id===_this.state.replies[i].parent_id){rep.push(_this.state.replies[i]);}}}_this.setState({r:rep});};_this.deleteReplies=function(comment_id){_this.apiService.deleteComment(comment_id).then(function(){_this.fetchReplies();});};_this.addLike=function(comment_id){_this.apiService.addLike(comment_id).then(function(){_this.fetchReplies();});};_this.apiService=new ApiService();return _this;}_createClass(Comment,[{key:\"componentWillMount\",value:function componentWillMount(){this.fetchReplies();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card my-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body small\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cf\",children:[/*#__PURE__*/_jsx(\"img\",{src:profile,alt:\"pic\",className:\"pic\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"card-title\",children:this.props.refinedComments.poster_name})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:this.props.refinedComments.body}),/*#__PURE__*/_jsx(\"button\",{className:\"btn \".concat(this.state.showReplyForm?'btn-danger two':'btn-warning'),onClick:this.toggleShowReplyForm,children:this.state.showReplyForm?'Cancel':'Reply'}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-info float-left btn-sm\",style:{fontSize:'18px'},onClick:function onClick(){return _this2.props.addLike(_this2.props.refinedComments.id);},children:[\"Likes: \",this.props.refinedComments.likes]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger float-right btn-sm\",style:{fontSize:'18px'},onClick:function onClick(){return _this2.props.deleteComment(_this2.props.refinedComments.id);},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn \".concat(this.state.showEditForm?'btn-danger three':'btn-primary'),onClick:this.toggleShowEditForm,children:this.state.showEditForm?'Cancel':'Edit'})]})}),this.state.showEditForm&&/*#__PURE__*/_jsx(EditComment,{userInfo:this.props.refinedComments,storeEdit:this.storeEdit}),this.state.showReplyForm&&/*#__PURE__*/_jsx(AddReply,{storeReply:this.storeReply,parentCommentId:this.props.refinedComments.comment_id}),this.state.r.map(function(r){return/*#__PURE__*/_jsx(Replies,{deleteReplies:_this2.deleteReplies,fetchReplies:_this2.fetchReplies,addLike:_this2.addLike,r:r},r.comment_id);})]});}}]);return Comment;}(Component);export default Comment;","map":{"version":3,"sources":["C:/Users/saylo/Documents/GitHub/ESOF432/comment-frontend/src/Comment.js"],"names":["React","Component","profile","AddReply","ApiService","Replies","EditComment","Comment","props","state","replies","r","showReplyForm","showEditForm","fetchReplies","apiService","getComments","then","data","setState","comments","findReplies","storeReply","storeComment","toggleShowReplyForm","storeEdit","updateComment","fetchComments","toggleShowEditForm","rep","i","length","parent_id","refinedComments","comment_id","push","deleteReplies","deleteComment","addLike","poster_name","body","fontSize","id","likes","map"],"mappings":"4hBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,OAAP,KAAoB,eAApB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,C,2FAEMC,CAAAA,O,kGAWJ,iBAAYC,KAAZ,CAAmB,yCACjB,uBAAMA,KAAN,EADiB,MATnBC,KASmB,CATX,CAENC,OAAO,CAAE,EAFH,CAGN;AACAC,CAAC,CAAE,EAJG,CAKNC,aAAa,CAAE,KALT,CAMNC,YAAY,CAAE,KANR,CASW,OAKnBC,YALmB,CAKJ,iBACb,OAAKC,UAAL,CAAgBC,WAAhB,GAA8BC,IAA9B,CAAmC,cAAc,IAAXC,CAAAA,IAAW,MAAXA,IAAW,CAC/C,MAAKC,QAAL,CAAc,CACZT,OAAO,CAAEQ,IAAI,CAACE,QADF,CAAd,EAGA,MAAKC,WAAL,GACD,CALD,CADa,EALI,OAiBnBC,UAjBmB,CAiBN,SAACJ,IAAD,CAAU,CACrB,MAAKH,UAAL,CAAgBQ,YAAhB,CAA6BL,IAA7B,EAAmCD,IAAnC,CAAwC,UAAM,CAC5C,MAAKH,YAAL,GACA,MAAKU,mBAAL,GACD,CAHD,EAID,CAtBkB,OAwBnBC,SAxBmB,CAwBR,SAACP,IAAD,CAAU,CACnB,MAAKH,UAAL,CAAgBW,aAAhB,CAA8BR,IAA9B,EAAoCD,IAApC,CAAyC,UAAM,CAC7C,MAAKT,KAAL,CAAWmB,aAAX,GACA,MAAKC,kBAAL,GACD,CAHD,EAKD,CA9BkB,OAgCnBJ,mBAhCmB,CAgCG,UAAM,CAC1B,MAAKL,QAAL,CAAc,CACZP,aAAa,CAAE,CAAC,MAAKH,KAAL,CAAWG,aADf,CAAd,EAGD,CApCkB,OAsCnBgB,kBAtCmB,CAsCE,UAAM,CACzB,MAAKT,QAAL,CAAc,CACZN,YAAY,CAAE,CAAC,MAAKJ,KAAL,CAAWI,YADd,CAAd,EAGD,CA1CkB,OA4CnBQ,WA5CmB,CA4CL,UAAM,CAElB,GAAIQ,CAAAA,GAAG,CAAG,EAAV,CAEA,IAAI,GAAIC,CAAAA,CAAC,CAAC,CAAV,CAAaA,CAAC,CAAG,MAAKrB,KAAL,CAAWC,OAAX,CAAmBqB,MAApC,CAA4CD,CAAC,EAA7C,CACA,CACE,GAAG,MAAKrB,KAAL,CAAWC,OAAX,CAAmBoB,CAAnB,EAAsBE,SAAtB,GAAoC,IAAvC,CACA,CACE,GAAG,MAAKxB,KAAL,CAAWyB,eAAX,CAA2BC,UAA3B,GAA0C,MAAKzB,KAAL,CAAWC,OAAX,CAAmBoB,CAAnB,EAAsBE,SAAnE,CAA6E,CAE3EH,GAAG,CAACM,IAAJ,CAAS,MAAK1B,KAAL,CAAWC,OAAX,CAAmBoB,CAAnB,CAAT,EACD,CACF,CACF,CACD,MAAKX,QAAL,CAAc,CAACR,CAAC,CAACkB,GAAH,CAAd,EACD,CA3DkB,OA6DnBO,aA7DmB,CA6DH,SAACF,UAAD,CAAgB,CAC9B,MAAKnB,UAAL,CAAgBsB,aAAhB,CAA8BH,UAA9B,EACGjB,IADH,CACQ,UAAM,CACV,MAAKH,YAAL,GACD,CAHH,EAID,CAlEkB,OAoEnBwB,OApEmB,CAoET,SAACJ,UAAD,CAAgB,CACxB,MAAKnB,UAAL,CAAgBuB,OAAhB,CAAwBJ,UAAxB,EACGjB,IADH,CACQ,UAAM,CACV,MAAKH,YAAL,GACD,CAHH,EAID,CAzEkB,CAEjB,MAAKC,UAAL,CAAkB,GAAIX,CAAAA,UAAJ,EAAlB,CAFiB,aAGlB,C,sDAUD,6BAAqB,CACnB,KAAKU,YAAL,GACD,C,sBA4DD,iBAAS,iBACP,mBACE,aAAK,SAAS,CAAC,WAAf,wBACA,YAAK,SAAS,CAAC,WAAf,uBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,aAAK,SAAS,CAAC,IAAf,wBACE,YAAK,GAAG,CAAEZ,OAAV,CAAmB,GAAG,CAAC,KAAvB,CAA6B,SAAS,CAAC,KAAvC,EADF,cAEE,WAAI,SAAS,CAAC,YAAd,UAA4B,KAAKM,KAAL,CAAWyB,eAAX,CAA2BM,WAAvD,EAFF,GADF,cAKE,WAAI,SAAS,CAAC,YAAd,UAA4B,KAAK/B,KAAL,CAAWyB,eAAX,CAA2BO,IAAvD,EALF,cAME,eACE,SAAS,eAAS,KAAK/B,KAAL,CAAWG,aAAX,CAA2B,gBAA3B,CAA8C,aAAvD,CADX,CAEE,OAAO,CAAE,KAAKY,mBAFhB,UAGG,KAAKf,KAAL,CAAWG,aAAX,CAA2B,QAA3B,CAAsC,OAHzC,EANF,cAWE,gBAAQ,SAAS,CAAC,4BAAlB,CAA+C,KAAK,CAAE,CAAC6B,QAAQ,CAAE,MAAX,CAAtD,CACQ,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACjC,KAAL,CAAW8B,OAAX,CAAmB,MAAI,CAAC9B,KAAL,CAAWyB,eAAX,CAA2BS,EAA9C,CAAN,EADjB,qBACkF,KAAKlC,KAAL,CAAWyB,eAAX,CAA2BU,KAD7G,GAXF,cAaE,eAAQ,SAAS,CAAC,mCAAlB,CAAsD,KAAK,CAAE,CAACF,QAAQ,CAAE,MAAX,CAA7D,CACQ,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACjC,KAAL,CAAW6B,aAAX,CAAyB,MAAI,CAAC7B,KAAL,CAAWyB,eAAX,CAA2BS,EAApD,CAAN,EADjB,oBAbF,cAgBE,eAAQ,SAAS,eAAS,KAAKjC,KAAL,CAAWI,YAAX,CAA0B,kBAA1B,CAA+C,aAAxD,CAAjB,CAA0F,OAAO,CAAE,KAAKe,kBAAxG,UACG,KAAKnB,KAAL,CAAWI,YAAX,CAA0B,QAA1B,CAAqC,MADxC,EAhBF,GADF,EADA,CAuBG,KAAKJ,KAAL,CAAWI,YAAX,eAA2B,KAAC,WAAD,EAAa,QAAQ,CAAE,KAAKL,KAAL,CAAWyB,eAAlC,CAAmD,SAAS,CAAE,KAAKR,SAAnE,EAvB9B,CAwBG,KAAKhB,KAAL,CAAWG,aAAX,eAA4B,KAAC,QAAD,EAAU,UAAU,CAAE,KAAKU,UAA3B,CAAwC,eAAe,CAAE,KAAKd,KAAL,CAAWyB,eAAX,CAA2BC,UAApF,EAxB/B,CAyBG,KAAKzB,KAAL,CAAWE,CAAX,CAAaiC,GAAb,CAAiB,SAACjC,CAAD,qBAAO,KAAC,OAAD,EAAS,aAAa,CAAE,MAAI,CAACyB,aAA7B,CAA4C,YAAY,CAAE,MAAI,CAACtB,YAA/D,CAA6E,OAAO,CAAE,MAAI,CAACwB,OAA3F,CAAoG,CAAC,CAAE3B,CAAvG,EAA+GA,CAAC,CAACuB,UAAjH,CAAP,EAAjB,CAzBH,GADF,CA6BD,C,qBApHmBjC,S,EAsHtB,cAAeM,CAAAA,OAAf","sourcesContent":["import React, {Component} from 'react';\nimport './index.css'\nimport profile from './profile.png';\nimport AddReply from \"./AddReply\";\nimport ApiService from \"./apiService\";\nimport Replies from \"./Replies\";\nimport EditComment from \"./EditComment\"\n\nclass Comment extends Component {\n\n  state = {\n\n    replies: [],\n    //r is sorted replies... I think\n    r: [],\n    showReplyForm: false,\n    showEditForm: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.apiService = new ApiService();\n  }\n\n  fetchReplies = () =>\n    this.apiService.getComments().then(({ data }) => {\n      this.setState({\n        replies: data.comments\n      });\n      this.findReplies()\n    });\n\n  componentWillMount() {\n    this.fetchReplies();\n  }\n\n  storeReply = (data) => {\n    this.apiService.storeComment(data).then(() => {\n      this.fetchReplies()\n      this.toggleShowReplyForm()\n    })\n  }\n\n  storeEdit= (data) => {\n    this.apiService.updateComment(data).then(() => {\n      this.props.fetchComments()\n      this.toggleShowEditForm()\n    })\n\n  }\n\n  toggleShowReplyForm = () => {\n    this.setState({\n      showReplyForm: !this.state.showReplyForm\n    });\n  };\n\n  toggleShowEditForm = () => {\n    this.setState({\n      showEditForm: !this.state.showEditForm\n    });\n  };\n\n  findReplies = () => {\n\n    var rep = []\n\n    for(let i=0; i < this.state.replies.length; i++)\n    {\n      if(this.state.replies[i].parent_id !== null)\n      {\n        if(this.props.refinedComments.comment_id === this.state.replies[i].parent_id){\n\n          rep.push(this.state.replies[i]);\n        }\n      }\n    }\n    this.setState({r:rep})\n  }\n\n  deleteReplies = (comment_id) => {\n    this.apiService.deleteComment(comment_id)\n      .then(() => {\n        this.fetchReplies()\n      })\n  }\n\n  addLike = (comment_id) => {\n    this.apiService.addLike(comment_id)\n      .then(() => {\n        this.fetchReplies()\n      })\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n      <div className=\"card my-3\">\n        <div className=\"card-body small\">\n          <div className=\"cf\">\n            <img src={profile} alt=\"pic\" className=\"pic\"/>\n            <h2 className=\"card-title\">{this.props.refinedComments.poster_name}</h2>\n          </div>\n          <h4 className=\"card-title\">{this.props.refinedComments.body}</h4>\n          <button\n            className={`btn ${this.state.showReplyForm ? 'btn-danger two' : 'btn-warning'}`}\n            onClick={this.toggleShowReplyForm}>\n            {this.state.showReplyForm ? 'Cancel' : 'Reply'}\n          </button>\n          <button className=\"btn-info float-left btn-sm\" style={{fontSize: '18px'}}\n                  onClick={() => this.props.addLike(this.props.refinedComments.id)}>Likes: {this.props.refinedComments.likes}</button>\n          <button className=\"btn btn-danger float-right btn-sm\" style={{fontSize: '18px'}}\n                  onClick={() => this.props.deleteComment(this.props.refinedComments.id)}>Delete\n          </button>\n          <button className={`btn ${this.state.showEditForm ? 'btn-danger three' : 'btn-primary'}`} onClick={this.toggleShowEditForm}>\n            {this.state.showEditForm ? 'Cancel' : 'Edit'}\n          </button>\n        </div>\n      </div>\n        {this.state.showEditForm && <EditComment userInfo={this.props.refinedComments} storeEdit={this.storeEdit}/>}\n        {this.state.showReplyForm && <AddReply storeReply={this.storeReply}  parentCommentId={this.props.refinedComments.comment_id}/>}\n        {this.state.r.map((r) => <Replies deleteReplies={this.deleteReplies} fetchReplies={this.fetchReplies} addLike={this.addLike} r={r} key={r.comment_id}/>)}\n      </div>\n    )\n  }\n}\nexport default Comment\n"]},"metadata":{},"sourceType":"module"}