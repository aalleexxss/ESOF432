{"version":3,"file":"react.esm.js","sources":["../src/Client/sessionId.ts","../../../node_modules/babel-plugin-transform-async-to-promises/helpers.js","../src/Client/lazyLoadScript.ts","../src/Client/generateRecaptchaToken.ts","../src/Client/ApiError.ts","../src/Client/debounceCollect.ts","../src/Client/index.ts","../src/contexts/ClientContext.ts","../src/theme.ts","../src/Provider.tsx","../src/hooks/useSafeEffect.ts","../src/ClapButton/templates/Simple/icons/ClapFull.tsx","../src/ClapButton/templates/Simple/style.ts","../src/ClapButton/templates/Simple/theme.ts","../src/ClapButton/templates/Simple/index.tsx","../src/ClapButton/templates/Medium/icons/ClapEmpty.tsx","../src/ClapButton/templates/Medium/icons/ClapFull.tsx","../src/ClapButton/templates/Medium/style.ts","../src/ClapButton/templates/Medium/index.tsx","../src/ClapButton/index.tsx","../src/LikeButton/templates/Simple/icons/ThumbIcon.tsx","../src/LikeButton/templates/Simple/style.ts","../src/LikeButton/templates/Simple/theme.ts","../src/LikeButton/templates/Simple/index.tsx","../src/LikeButton/templates/Twitter/icons/TwitterHeartFull.tsx","../src/LikeButton/templates/Twitter/icons/TwitterHeartEmpty.tsx","../src/LikeButton/templates/Twitter/style.ts","../src/LikeButton/templates/Twitter/index.tsx","../src/LikeButton/index.tsx","../src/UpdownButton/templates/Simple/icons/ThumbIcon.tsx","../src/UpdownButton/templates/Simple/style.ts","../src/UpdownButton/templates/Simple/theme.ts","../src/UpdownButton/templates/Simple/index.tsx","../src/UpdownButton/templates/Reddit/icons/RedditArrow.tsx","../src/UpdownButton/templates/Reddit/style.ts","../src/UpdownButton/templates/Reddit/theme.ts","../src/UpdownButton/templates/Reddit/index.tsx","../src/UpdownButton/index.tsx"],"sourcesContent":["export const getSessionId = () => {\n  if (typeof window === 'undefined') {\n    throw new Error('Session ID cannot be generated server-side!');\n  }\n\n  //TODO: remove sessionId legacy name\n  const legacySessionId = window.localStorage.getItem('sessionId');\n\n  if (legacySessionId) {\n    window.localStorage.setItem('lyket-session-id', legacySessionId);\n    window.localStorage.removeItem('sessionId');\n  }\n\n  const sessionId = window.localStorage.getItem('lyket-session-id');\n\n  if (sessionId) {\n    return sessionId;\n  }\n\n  const newSessionId =\n    Math.random()\n      .toString(36)\n      .substring(2, 15) +\n    Math.random()\n      .toString(36)\n      .substring(2, 15);\n\n  window.localStorage.setItem('lyket-session-id', newSessionId);\n\n  return newSessionId;\n};\n","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","type Options = Partial<{\n  async: boolean;\n  integrity: string;\n  type: string;\n}>;\n\nexport function lazyLoadScript(src: string, opts: Options = {}) {\n  return new Promise(function(resolve, reject) {\n    const { async, integrity, type } = opts;\n\n    const sc = document.querySelector(`script[src=\"${src}\"]`);\n\n    if (sc) {\n      resolve(sc);\n      return;\n    }\n\n    const script = document.createElement('script');\n    script.src = src;\n\n    if (async) script.setAttribute('async', 'true');\n    if (integrity) script.setAttribute('integrity', integrity);\n    if (type) script.setAttribute('type', type);\n\n    script.onload = () => resolve(script);\n    script.onerror = event => reject(event);\n\n    document.body.appendChild(script);\n  });\n}\n","import { lazyLoadScript } from './lazyLoadScript';\n\ndeclare const grecaptcha: any;\n\nexport function generateRecaptchaToken(\n  siteKey: string,\n  action: string\n): Promise<string> {\n  return lazyLoadScript(\n    `https://www.google.com/recaptcha/api.js?render=${siteKey}`\n  ).then(\n    () =>\n      new Promise((resolve, reject) => {\n        grecaptcha.ready(async () => {\n          try {\n            const token = await grecaptcha.execute(siteKey, {\n              action,\n            });\n            resolve(token);\n          } catch (e) {\n            console.error('recaptcha error!', e);\n            reject(e);\n          }\n        });\n      })\n  );\n}\n","export class ApiError extends Error {\n  requestInfo: RequestInfo;\n  requestInit: RequestInit;\n  response: Response;\n\n  constructor(\n    requestInfo: RequestInfo,\n    requestInit: RequestInit,\n    response: Response\n  ) {\n    super(\n      `Failed API request to ${requestInfo} with status ${response.status}`\n    );\n\n    this.requestInfo = requestInfo;\n    this.requestInit = requestInit;\n    this.response = response;\n  }\n}\n","const now = () => new Date().getTime();\n\ntype Deferred = {\n  resolve: (value: any) => void;\n  reject: (value: any) => void;\n};\n\nexport function debounceCollect<Args extends Array<any>>(\n  func: (calls: Array<Args>) => Promise<Array<any>>,\n  wait: number\n) {\n  let timer: NodeJS.Timeout | null;\n  let timestamp: number;\n\n  let args: Array<Args> = [];\n  let deferreds: Array<Deferred> = [];\n\n  async function onTimeout() {\n    let elapsed = now() - timestamp;\n\n    if (elapsed < wait && elapsed > 0) {\n      timer = setTimeout(onTimeout, wait - elapsed);\n    } else {\n      timer = null;\n      await call();\n      if (!timer) reset();\n    }\n  }\n\n  async function call() {\n    const results = await func.call(null, args);\n\n    for (let i = 0; i < results.length; i++) {\n      deferreds[i].resolve(results[i]);\n    }\n  }\n\n  function reset() {\n    args = [];\n    deferreds = [];\n  }\n\n  return function debounced(...callArgs: Args): Promise<any> {\n    args.push(callArgs);\n\n    timestamp = now();\n\n    if (!timer) timer = setTimeout(onTimeout, wait);\n\n    return new Promise((resolve, reject) => {\n      deferreds.push({ resolve, reject });\n    });\n  };\n}\n","import { getSessionId } from './sessionId';\nimport { generateRecaptchaToken } from './generateRecaptchaToken';\nimport { ApiError } from './ApiError';\nimport { debounceCollect } from './debounceCollect';\n\nexport type ConstructorArguments = {\n  apiKey: string;\n  recaptchaSiteKey?: string;\n  baseUrl?: string;\n  disableSessionId?: boolean;\n};\n\nclass LikeButtonClient {\n  client: Client;\n\n  constructor(client: Client) {\n    this.client = client;\n  }\n\n  press({\n    id,\n    namespace,\n  }: Paths.LikeButtonPress.PathParameters): Promise<\n    Paths.LikeButtonPress.Responses.$200\n  > {\n    return this.client.put(\n      namespace\n        ? `/like-buttons/${namespace}/${id}/press`\n        : `/like-buttons/${id}/press`,\n      'press'\n    );\n  }\n\n  info({\n    id,\n    namespace,\n  }: Paths.LikeButtonInfo.PathParameters): Promise<\n    Paths.LikeButtonInfo.Responses.$200\n  > {\n    return this.client.enqueueToBatch(\n      namespace ? `/like-buttons/${namespace}/${id}` : `/like-buttons/${id}`\n    );\n  }\n}\n\nclass ClapButtonClient {\n  client: Client;\n\n  constructor(client: Client) {\n    this.client = client;\n  }\n\n  press({\n    id,\n    namespace,\n  }: Paths.ClapButtonPress.PathParameters): Promise<\n    Paths.ClapButtonPress.Responses.$200\n  > {\n    return this.client.put(\n      namespace\n        ? `/clap-buttons/${namespace}/${id}/press`\n        : `/clap-buttons/${id}/press`,\n      'press'\n    );\n  }\n\n  info({\n    id,\n    namespace,\n  }: Paths.ClapButtonInfo.PathParameters): Promise<\n    Paths.ClapButtonInfo.Responses.$200\n  > {\n    return this.client.enqueueToBatch(\n      namespace ? `/clap-buttons/${namespace}/${id}` : `/clap-buttons/${id}`\n    );\n  }\n}\n\nclass UpdownButtonClient {\n  client: Client;\n\n  constructor(client: Client) {\n    this.client = client;\n  }\n\n  info({\n    id,\n    namespace,\n  }: Paths.UpdownButtonInfo.PathParameters): Promise<\n    Paths.UpdownButtonInfo.Responses.$200\n  > {\n    return this.client.enqueueToBatch(\n      namespace ? `/updown-buttons/${namespace}/${id}` : `/updown-buttons/${id}`\n    );\n  }\n\n  pressUp({\n    id,\n    namespace,\n  }: Paths.UpdownButtonPressUp.PathParameters): Promise<\n    Paths.UpdownButtonPressUp.Responses.$200\n  > {\n    return this.client.put(\n      namespace\n        ? `/updown-buttons/${namespace}/${id}/press-up`\n        : `/updown-buttons/${id}/press-up`,\n      'pressUp'\n    );\n  }\n\n  pressDown({\n    id,\n    namespace,\n  }: Paths.UpdownButtonPressDown.PathParameters): Promise<\n    Paths.UpdownButtonPressDown.Responses.$200\n  > {\n    return this.client.put(\n      namespace\n        ? `/updown-buttons/${namespace}/${id}/press-down`\n        : `/updown-buttons/${id}/press-down`,\n      'pressDown'\n    );\n  }\n}\n\nexport class Client {\n  apiKey: string;\n  baseUrl: string;\n  disableSessionId: boolean;\n  recaptchaSiteKey: string | undefined;\n  likeButtons: LikeButtonClient;\n  clapButtons: ClapButtonClient;\n  updownButtons: UpdownButtonClient;\n  enqueueToBatch: (url: string) => Promise<any>;\n\n  constructor({\n    apiKey,\n    recaptchaSiteKey,\n    baseUrl,\n    disableSessionId,\n  }: ConstructorArguments) {\n    this.apiKey = apiKey;\n    this.recaptchaSiteKey = recaptchaSiteKey;\n    this.disableSessionId = disableSessionId;\n    this.baseUrl = baseUrl || 'https://api.lyket.dev';\n\n    this.likeButtons = new LikeButtonClient(this);\n    this.clapButtons = new ClapButtonClient(this);\n    this.updownButtons = new UpdownButtonClient(this);\n\n    this.enqueueToBatch = debounceCollect<[string]>(this.batch.bind(this), 500);\n  }\n\n  get(url: string) {\n    return this.request(url);\n  }\n\n  async batch(calls: Array<[string]>) {\n    // return Promise.all(calls.map(args => this.request(args[0])));\n    const url: RequestInfo = '/buttons/batch';\n\n    const result = await this.request(url, {\n      method: 'POST',\n      body: {\n        type: 'batch',\n        data: {\n          attributes: { urls: calls.map(args => args[0]) },\n        },\n      },\n    });\n\n    return result.data.attributes.responses;\n  }\n\n  put(url: string, recaptchaAction: string) {\n    return this.request(url, { method: 'PUT', recaptchaAction });\n  }\n\n  async request(\n    input: string,\n    init?: {\n      method: string;\n      body?: Record<string, any>;\n      recaptchaAction?: string;\n      headers?: Record<string, string>;\n    }\n  ) {\n    if (typeof window === 'undefined') {\n      throw 'Client is supposed to be used client-side only!';\n    }\n\n    const defaultHeaders: Record<string, string> = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${this.apiKey}`,\n    };\n\n    if (!this.disableSessionId) {\n      defaultHeaders['x-session-id'] = getSessionId();\n    }\n\n    if (this.recaptchaSiteKey && init && init.recaptchaAction) {\n      defaultHeaders['x-recaptcha-token'] = await generateRecaptchaToken(\n        this.recaptchaSiteKey,\n        init.recaptchaAction\n      );\n    }\n\n    const url: RequestInfo = `${this.baseUrl}/v1${input}`;\n    const requestInit: RequestInit = init\n      ? {\n          ...init,\n          headers: { ...defaultHeaders, ...init.headers },\n          body: init.body && JSON.stringify(init.body),\n        }\n      : { headers: defaultHeaders };\n\n    const response = await fetch(url, requestInit);\n\n    if (response.status < 200 || response.status >= 300) {\n      throw new ApiError(url, requestInit, response);\n    }\n\n    return response.json();\n  }\n}\n","import React from 'react';\nimport { Client } from '../Client';\n\nexport const ClientContext = React.createContext<Client | null>(null);\n","export type ThemeRecord = {\n  colors?: Colors;\n  fonts?: Fonts;\n};\n\ntype Colors = {\n  background?: string;\n  text?: string;\n  primary?: string;\n  secondary?: string;\n  highlight?: string;\n};\n\ntype Fonts = {\n  body?: string;\n};\n\nexport const defaultTheme: ThemeRecord = {\n  colors: {\n    background: 'transparent',\n    text: '#292929',\n    primary: '#BFFCED',\n    secondary: '#FBDEFB',\n    highlight: '#e095ed',\n  },\n  fonts: {\n    body: 'inherit',\n  },\n};\n","/* @jsx jsx */\n\nimport { FC, HTMLAttributes, ReactChild, useState, useEffect } from 'react';\nimport { jsx, ThemeProvider } from 'theme-ui';\nimport { Client, ConstructorArguments } from './Client';\nimport { ClientContext } from './contexts/ClientContext';\nimport { defaultTheme, ThemeRecord } from './theme';\n\nexport interface ProviderProps extends HTMLAttributes<HTMLDivElement> {\n  apiKey: string;\n  recaptchaSiteKey?: string;\n  disableSessionId?: boolean;\n  baseUrl?: string;\n  children?: ReactChild;\n  theme?: ThemeRecord | null;\n}\n\nconst clientInstances: Record<string, Client> = {};\n\nconst getClientInstanceForSettings = (settings: ConstructorArguments) => {\n  const key = JSON.stringify(settings);\n\n  if (clientInstances[key]) {\n    return clientInstances[key];\n  }\n\n  const client = new Client(settings);\n  clientInstances[key] = client;\n  return client;\n};\n\nexport const Provider: FC<ProviderProps> = ({\n  apiKey,\n  recaptchaSiteKey,\n  disableSessionId,\n  baseUrl,\n  children,\n  theme: customTheme,\n}) => {\n  const [client, setClient] = useState<Client>(\n    getClientInstanceForSettings({\n      apiKey,\n      recaptchaSiteKey,\n      disableSessionId,\n      baseUrl,\n    })\n  );\n\n  useEffect(() => {\n    setClient(\n      getClientInstanceForSettings({\n        apiKey,\n        recaptchaSiteKey,\n        disableSessionId,\n        baseUrl,\n      })\n    );\n  }, [apiKey, disableSessionId, recaptchaSiteKey, baseUrl]);\n\n  const theme = customTheme || { colors: {}, fonts: {} };\n  const colors = { ...defaultTheme.colors, ...theme.colors };\n  const fonts = { ...defaultTheme.fonts, ...theme.fonts };\n\n  return (\n    <ThemeProvider\n      theme={{\n        useBodyStyles: false,\n        useLocalStorage: false,\n        colors,\n        fonts,\n        styles: {},\n      }}\n    >\n      <ClientContext.Provider value={client}>{children}</ClientContext.Provider>\n    </ThemeProvider>\n  );\n};\n","import React, { useState, useEffect } from 'react';\n\ntype PromiseFactory = () => Promise<any>;\n\nexport const useSafeEffect = (\n  effect: PromiseFactory,\n  deps?: React.DependencyList | undefined\n) => {\n  const setState = useState<boolean>()[1];\n\n  return useEffect(() => {\n    async function safeRunner() {\n      try {\n        await effect();\n      } catch (e) {\n        setState(() => {\n          throw e;\n        });\n      }\n    }\n\n    safeRunner();\n  }, deps);\n};\n","import React from 'react';\n\ninterface Props {\n  className?: string;\n}\n\nexport const ClapFull = ({ className }: Props) => (\n  <svg viewBox=\"0 0 29 29\" aria-label=\"clap\" className={className}>\n    <path d=\"M13.74 1l.76 2.97.76-2.97zM18.63 2.22l-1.43-.47-.4 3.03zM11.79 1.75l-1.43.47 1.84 2.56zM24.47 14.3L21.45 9c-.29-.43-.69-.7-1.12-.78a1.16 1.16 0 0 0-.91.22c-.3.23-.48.52-.54.84l.05.07 2.85 5c1.95 3.56 1.32 6.97-1.85 10.14a8.46 8.46 0 0 1-.55.5 5.75 5.75 0 0 0 3.36-1.76c3.26-3.27 3.04-6.75 1.73-8.91M14.58 10.89c-.16-.83.1-1.57.7-2.15l-2.5-2.49c-.5-.5-1.38-.5-1.88 0-.18.18-.27.4-.33.63l4.01 4z\"></path>\n    <path d=\"M17.81 10.04a1.37 1.37 0 0 0-.88-.6.81.81 0 0 0-.64.15c-.18.13-.71.55-.24 1.56l1.43 3.03a.54.54 0 1 1-.87.61L9.2 7.38a.99.99 0 1 0-1.4 1.4l4.4 4.4a.54.54 0 1 1-.76.76l-4.4-4.4L5.8 8.3a.99.99 0 0 0-1.4 0 .98.98 0 0 0 0 1.39l1.25 1.24 4.4 4.4a.54.54 0 0 1 0 .76.54.54 0 0 1-.76 0l-4.4-4.4a1 1 0 0 0-1.4 0 .98.98 0 0 0 0 1.4l1.86 1.85 2.76 2.77a.54.54 0 0 1-.76.76L4.58 15.7a.98.98 0 0 0-1.4 0 .99.99 0 0 0 0 1.4l5.33 5.32c3.37 3.37 6.64 4.98 10.49 1.12 2.74-2.74 3.27-5.54 1.62-8.56l-2.8-4.94z\"></path>\n  </svg>\n);\n","import { ThemeUIStyleObject } from 'theme-ui';\n\nexport const style: Record<string, ThemeUIStyleObject> = {\n  root: {\n    color: 'inherit',\n    fontFamily: 'inherit',\n    display: 'inline-flex',\n    alignItems: 'center',\n  },\n  counter: {\n    ml: '.5em',\n    color: 'text',\n    fontWeight: 'body',\n    fontFamily: 'body',\n  },\n  icon: {\n    height: '2em',\n    display: 'block',\n    margin: '0 auto',\n    fill: 'text',\n  },\n  ring: {\n    opacity: '0',\n    width: `90%`,\n    height: `90%`,\n    borderRadius: `3em`,\n    border: `1px solid`,\n    borderColor: 'highlight',\n    boxSizing: 'border-box',\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n  },\n  button: {\n    border: 'none',\n    outline: 'none',\n    cursor: 'pointer',\n    background: 'transparent',\n    appearance: 'none',\n    position: 'relative',\n    fontSize: 'inherit',\n    borderRadius: '100%',\n    transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n    width: '3em',\n    height: '3em',\n    padding: '0',\n    lineHeight: '1em',\n  },\n  baloon: {\n    opacity: '0',\n    position: 'absolute',\n    transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n    fontSize: '.8em',\n    height: '3.4em',\n    width: '3.4em',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    color: 'white',\n    backgroundColor: 'text',\n    borderRadius: '100%',\n    top: '-3em',\n    left: '-1.7em',\n  },\n  centeredContainer: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n  },\n};\n","export default {\n  buttons: {\n    inactive: {\n      transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n      backgroundColor: 'background',\n    },\n    active: {\n      backgroundColor: 'primary',\n    },\n  },\n};\n","/* @jsx jsx */\n\nimport { jsx, ThemeProvider } from 'theme-ui';\nimport { ClapButtonTemplateComponentProps } from '../..';\nimport { ClapFull } from './icons/ClapFull';\nimport { keyframes } from '@emotion/core';\nimport { FC, useCallback, useState, useRef } from 'react';\nimport { style } from './style';\nimport theme from './theme';\n\nconst baloonFade = keyframes({\n  '0%': {\n    opacity: '0',\n    transform: 'translateY(-1em)',\n  },\n  '72%': {\n    opacity: '1',\n    transform: 'translateY(-4em)',\n  },\n  '100%': {\n    opacity: '0',\n    transform: 'translateY(-6em)',\n  },\n});\n\nconst iconScale = keyframes({\n  '0%': {\n    transform: 'scale(0)',\n  },\n  '52%': {\n    transform: 'scale(1.2)',\n  },\n  '72%': {\n    transform: 'scale(0.9)',\n  },\n  '100%': {\n    transform: 'scale(1)',\n  },\n});\n\nconst ringScale = keyframes({\n  '0%': {\n    opacity: '1',\n    borderWidth: '0.5em',\n  },\n  '52%': {\n    opacity: '0',\n    borderWidth: '0',\n  },\n});\n\nconst BALOON = {\n  durationMs: 800,\n  animation: baloonFade,\n};\n\nconst ICON = {\n  durationMs: 500,\n  animation: iconScale,\n};\n\nconst RING = {\n  durationMs: 600,\n  animation: ringScale,\n};\n\nexport const Simple: FC<ClapButtonTemplateComponentProps> = ({\n  isLoading,\n  userClaps,\n  totalClaps,\n  handlePress,\n  isCounterVisible,\n}) => {\n  const [animationActive, setAnimationActive] = useState<boolean>(false);\n\n  const timeoutId = useRef<NodeJS.Timeout | null>(null);\n\n  const handleClick = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      setAnimationActive(true);\n      if (timeoutId.current) {\n        clearTimeout(timeoutId.current);\n      }\n      timeoutId.current = setTimeout(\n        () => setAnimationActive(false),\n        BALOON.durationMs\n      );\n      handlePress(e);\n    },\n    [handlePress]\n  );\n\n  const ringStyle = {\n    ...style.ring,\n    ...{\n      animation: animationActive\n        ? `${RING.animation} ${RING.durationMs}ms ease forwards`\n        : null,\n    },\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <div sx={style.root}>\n        <button\n          onClick={handleClick}\n          sx={{\n            ...style.button,\n            ...{\n              variant: userClaps ? 'buttons.active' : 'buttons.inactive',\n              '@media (hover: hover)': {\n                ':hover': {\n                  variant: 'buttons.active',\n                },\n              },\n            },\n          }}\n          disabled={isLoading}\n        >\n          <div sx={style.centeredContainer}>\n            <div\n              key={timeoutId.current && timeoutId.current.toString()}\n              sx={{\n                ...style.baloon,\n                ...{\n                  animation: animationActive\n                    ? `${BALOON.animation} ${BALOON.durationMs}ms ease forwards`\n                    : null,\n                },\n              }}\n            >\n              {userClaps}\n            </div>\n          </div>\n          <div sx={ringStyle} />\n          <ClapFull\n            sx={{\n              ...style.icon,\n              ...{\n                animation: animationActive\n                  ? `${ICON.animation} ${ICON.durationMs}ms ease forwards`\n                  : null,\n              },\n            }}\n          />\n        </button>\n        {isCounterVisible && <div sx={style.counter}>{totalClaps}</div>}\n      </div>\n    </ThemeProvider>\n  );\n};\n","import React from 'react';\n\ninterface Props {\n  className?: string;\n}\n\nexport const ClapEmpty = ({ className }: Props) => (\n  <svg viewBox=\"0 0 33 33\" aria-label=\"clap\" className={className}>\n    <path\n      d=\"M28.86 17.34l-3.64-6.4c-.3-.43-.71-.73-1.16-.8a1.12 1.12 0 0 0-.9.21c-.62.5-.73 1.18-.32 2.06l1.22 2.6 1.4 2.45c2.23 4.09 1.51 8-2.15 11.66a9.6 9.6 0 0 1-.8.71 6.53 6.53 0 0 0 4.3-2.1c3.82-3.82 3.57-7.87 2.05-10.39zm-6.25 11.08c3.35-3.35 4-6.78 1.98-10.47L21.2 12c-.3-.43-.71-.72-1.16-.8a1.12 1.12 0 0 0-.9.22c-.62.49-.74 1.18-.32 2.06l1.72 3.63a.5.5 0 0 1-.81.57l-8.91-8.9a1.33 1.33 0 0 0-1.89 1.88l5.3 5.3a.5.5 0 0 1-.71.7l-5.3-5.3-1.49-1.49c-.5-.5-1.38-.5-1.88 0a1.34 1.34 0 0 0 0 1.89l1.49 1.5 5.3 5.28a.5.5 0 0 1-.36.86.5.5 0 0 1-.36-.15l-5.29-5.29a1.34 1.34 0 0 0-1.88 0 1.34 1.34 0 0 0 0 1.89l2.23 2.23L9.3 21.4a.5.5 0 0 1-.36.85.5.5 0 0 1-.35-.14l-3.32-3.33a1.33 1.33 0 0 0-1.89 0 1.32 1.32 0 0 0-.39.95c0 .35.14.69.4.94l6.39 6.4c3.53 3.53 8.86 5.3 12.82 1.35zM12.73 9.26l5.68 5.68-.49-1.04c-.52-1.1-.43-2.13.22-2.89l-3.3-3.3a1.34 1.34 0 0 0-1.88 0 1.33 1.33 0 0 0-.4.94c0 .22.07.42.17.61zm14.79 19.18a7.46 7.46 0 0 1-6.41 2.31 7.92 7.92 0 0 1-3.67.9c-3.05 0-6.12-1.63-8.36-3.88l-6.4-6.4A2.31 2.31 0 0 1 2 19.72a2.33 2.33 0 0 1 1.92-2.3l-.87-.87a2.34 2.34 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.64l-.14-.14a2.34 2.34 0 0 1 0-3.3 2.39 2.39 0 0 1 3.3 0l.14.14a2.33 2.33 0 0 1 3.95-1.24l.09.09c.09-.42.29-.83.62-1.16a2.34 2.34 0 0 1 3.3 0l3.38 3.39a2.17 2.17 0 0 1 1.27-.17c.54.08 1.03.35 1.45.76.1-.55.41-1.03.9-1.42a2.12 2.12 0 0 1 1.67-.4 2.8 2.8 0 0 1 1.85 1.25l3.65 6.43c1.7 2.83 2.03 7.37-2.2 11.6zM13.22.48l-1.92.89 2.37 2.83-.45-3.72zm8.48.88L19.78.5l-.44 3.7 2.36-2.84zM16.5 3.3L15.48 0h2.04L16.5 3.3z\"\n      fillRule=\"evenodd\"\n    ></path>\n  </svg>\n);\n","import React from 'react';\n\ninterface Props {\n  className?: string;\n}\n\nexport const ClapFull = ({ className }: Props) => (\n  <svg viewBox=\"0 0 29 29\" aria-label=\"clap\" className={className}>\n    <path d=\"M13.74 1l.76 2.97.76-2.97zM18.63 2.22l-1.43-.47-.4 3.03zM11.79 1.75l-1.43.47 1.84 2.56zM24.47 14.3L21.45 9c-.29-.43-.69-.7-1.12-.78a1.16 1.16 0 0 0-.91.22c-.3.23-.48.52-.54.84l.05.07 2.85 5c1.95 3.56 1.32 6.97-1.85 10.14a8.46 8.46 0 0 1-.55.5 5.75 5.75 0 0 0 3.36-1.76c3.26-3.27 3.04-6.75 1.73-8.91M14.58 10.89c-.16-.83.1-1.57.7-2.15l-2.5-2.49c-.5-.5-1.38-.5-1.88 0-.18.18-.27.4-.33.63l4.01 4z\"></path>\n    <path d=\"M17.81 10.04a1.37 1.37 0 0 0-.88-.6.81.81 0 0 0-.64.15c-.18.13-.71.55-.24 1.56l1.43 3.03a.54.54 0 1 1-.87.61L9.2 7.38a.99.99 0 1 0-1.4 1.4l4.4 4.4a.54.54 0 1 1-.76.76l-4.4-4.4L5.8 8.3a.99.99 0 0 0-1.4 0 .98.98 0 0 0 0 1.39l1.25 1.24 4.4 4.4a.54.54 0 0 1 0 .76.54.54 0 0 1-.76 0l-4.4-4.4a1 1 0 0 0-1.4 0 .98.98 0 0 0 0 1.4l1.86 1.85 2.76 2.77a.54.54 0 0 1-.76.76L4.58 15.7a.98.98 0 0 0-1.4 0 .99.99 0 0 0 0 1.4l5.33 5.32c3.37 3.37 6.64 4.98 10.49 1.12 2.74-2.74 3.27-5.54 1.62-8.56l-2.8-4.94z\"></path>\n  </svg>\n);\n","import { ThemeUIStyleObject } from 'theme-ui';\n\nexport const style: Record<string, ThemeUIStyleObject> = {\n  root: {\n    color: 'inherit',\n    fontFamily: 'inherit',\n    display: 'inline-flex',\n    alignItems: 'center',\n  },\n  counter: {\n    ml: '.2em',\n  },\n  button: {\n    border: 'none',\n    outline: 'none',\n    cursor: 'pointer',\n    background: 'transparent',\n    appearance: 'none',\n    position: 'relative',\n    fontSize: 'inherit',\n    p: 0,\n    '@media (hover: hover)': {\n      ':hover': {\n        svg: {\n          transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n          transform: 'scale(1.1)',\n        },\n      },\n      ':active': {\n        svg: {\n          transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n          transform: 'scale(1.1)',\n        },\n      },\n    },\n  },\n  baloon: {\n    opacity: '0',\n    position: 'absolute',\n    transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n    fontSize: '.8em',\n    height: '3.4em',\n    width: '3.4em',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    color: 'white',\n    background: '#292929',\n    borderRadius: '100%',\n    top: '-3em',\n    left: '-1.7em',\n  },\n  centeredContainer: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n  },\n};\n","/* @jsx jsx */\n\nimport { jsx } from 'theme-ui';\nimport { ClapButtonTemplateComponentProps } from '../..';\nimport { ClapEmpty } from './icons/ClapEmpty';\nimport { ClapFull } from './icons/ClapFull';\nimport { keyframes } from '@emotion/core';\nimport { FC, useCallback, useState, useRef } from 'react';\nimport { style } from './style';\n\nconst baloonFade = keyframes({\n  '0%': {\n    opacity: '0',\n    transform: 'translateY(-1em)',\n  },\n  '72%': {\n    opacity: '1',\n    transform: 'translateY(-4em)',\n  },\n  '100%': {\n    opacity: '0',\n    transform: 'translateY(-6em)',\n  },\n});\n\nconst triangleFade = keyframes({\n  '0%': {\n    opacity: '0',\n    transform: 'translateY(-0.5em) scale(1)',\n  },\n  '32%': {\n    opacity: '1',\n    transform: 'translateY(-1em) scale(1.3)',\n  },\n  '100%': {\n    opacity: '0',\n    transform: 'translateY(-2em) scale(1.6)',\n  },\n});\n\nconst iconScale = keyframes({\n  '0%': {\n    transform: 'scale(1)',\n  },\n  '32%': {\n    transform: 'scale(1.15)',\n  },\n  '100%': {\n    transform: 'scale(1.1)',\n  },\n});\n\nconst BALOON = {\n  durationMs: 800,\n  animation: baloonFade,\n};\n\nconst TRIANGLES = {\n  count: 5,\n  size: 0.2,\n  color: '#ff365e',\n  durationMs: 300,\n  animation: triangleFade,\n};\n\nconst CIRCLES = {\n  count: 5,\n  size: 0.05,\n  color: '#4086ff',\n  durationMs: 500,\n  animation: triangleFade,\n};\n\nconst ICON = {\n  durationMs: CIRCLES.durationMs,\n  animation: iconScale,\n};\nexport const Medium: FC<ClapButtonTemplateComponentProps> = ({\n  isLoading,\n  userClaps,\n  totalClaps,\n  handlePress,\n  isCounterVisible,\n}) => {\n  const [animationActive, setAnimationActive] = useState<boolean>(false);\n\n  const triangles = [];\n  for (let i = 0; i < TRIANGLES.count; i++) {\n    triangles.push(\n      <div\n        key={i}\n        sx={{\n          transform: `rotate(${(360 / TRIANGLES.count) * i}deg)`,\n          transformOrigin: `${TRIANGLES.size}em 0`,\n          marginLeft: `-${TRIANGLES.size}em`,\n        }}\n      >\n        <div\n          sx={{\n            width: '0',\n            height: '0',\n            opacity: '0',\n            borderLeft: `${TRIANGLES.size}em solid transparent`,\n            borderRight: `${TRIANGLES.size}em solid transparent`,\n            borderTop: `${TRIANGLES.size}em solid ${TRIANGLES.color}`,\n            position: 'absolute',\n            animation: animationActive\n              ? `${triangleFade} ${TRIANGLES.durationMs}ms ease forwards`\n              : null,\n          }}\n        />\n      </div>\n    );\n  }\n\n  const circles = [];\n  for (let i = 0; i < CIRCLES.count; i++) {\n    circles.push(\n      <div\n        key={i}\n        sx={{\n          transform: `rotate(${(360 / CIRCLES.count) * i}deg)`,\n          transformOrigin: `${CIRCLES.size}em 0`,\n          marginLeft: `-${CIRCLES.size}em`,\n        }}\n      >\n        <div\n          sx={{\n            width: '0',\n            height: '0',\n            opacity: '0',\n            padding: `${CIRCLES.size}em`,\n            backgroundColor: `${CIRCLES.color}`,\n            borderRadius: '100%',\n            position: 'absolute',\n            animation: animationActive\n              ? `${triangleFade} ${CIRCLES.durationMs}ms ease forwards`\n              : null,\n          }}\n        />\n      </div>\n    );\n  }\n\n  const timeoutId = useRef<NodeJS.Timeout | null>(null);\n\n  const handleClick = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      setAnimationActive(true);\n      if (timeoutId.current) {\n        clearTimeout(timeoutId.current);\n      }\n      timeoutId.current = setTimeout(\n        () => setAnimationActive(false),\n        BALOON.durationMs\n      );\n      handlePress(e);\n    },\n    [handlePress]\n  );\n\n  const Icon = userClaps && userClaps > 0 ? ClapFull : ClapEmpty;\n\n  return (\n    <div sx={style.root}>\n      <button onClick={handleClick} sx={style.button} disabled={isLoading}>\n        <div sx={style.centeredContainer}> {triangles} </div>\n        <div sx={style.centeredContainer}> {circles} </div>\n        <div sx={style.centeredContainer}>\n          <div\n            key={timeoutId.current && timeoutId.current.toString()}\n            sx={{\n              ...style.baloon,\n              ...{\n                animation: animationActive\n                  ? `${BALOON.animation} ${BALOON.durationMs}ms ease forwards`\n                  : null,\n              },\n            }}\n          >\n            {userClaps}\n          </div>\n        </div>\n        <Icon\n          sx={{\n            fill: isLoading ? '#aaa' : 'auto',\n            height: '3em',\n            transition: 'all 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n            animation: animationActive\n              ? `${ICON.animation} ${ICON.durationMs}ms ease forwards`\n              : null,\n          }}\n        />\n      </button>\n      {isCounterVisible && <div sx={style.counter}>{totalClaps}</div>}\n    </div>\n  );\n};\n","import React, { FC, useCallback, useContext, useState } from 'react';\nimport { ClientContext } from '../contexts/ClientContext';\nimport { useSafeEffect } from '../hooks/useSafeEffect';\nimport { Simple } from './templates/Simple';\nimport { Medium } from './templates/Medium';\nimport { camelizeKeys } from 'humps';\n\nconst templates = {\n  Simple,\n  Medium,\n};\n\nexport interface ClapButtonTemplateComponentProps {\n  isLoading: boolean;\n  userClaps: number | undefined;\n  totalClaps: number | undefined;\n  handlePress: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n  isCounterVisible: boolean;\n}\n\ntype CallbackProps = Components.Schemas.ClapButton['data'];\n\nexport interface ClapButtonProps {\n  id: string;\n  namespace?: string;\n  hideCounterIfLessThan?: number;\n  onLoad?: (props: CallbackProps) => void;\n  onPress?: (props: CallbackProps) => void;\n  children?: (\n    props: ClapButtonTemplateComponentProps\n  ) => React.ReactElement<any, any> | null;\n  component?: React.ComponentType<ClapButtonTemplateComponentProps>;\n}\n\ntype FCWithTemplates<Props> = FC<Props> & {\n  templates: {\n    Simple: React.ComponentType<ClapButtonTemplateComponentProps>;\n    Medium: React.ComponentType<ClapButtonTemplateComponentProps>;\n  };\n};\n\nconst ClapButton: FCWithTemplates<ClapButtonProps> = ({\n  id,\n  namespace,\n  hideCounterIfLessThan,\n  children,\n  component,\n  onLoad,\n  onPress,\n}) => {\n  const client = useContext(ClientContext);\n\n  const [response, setResponse] = useState<\n    Components.Schemas.ClapButton['data'] | null\n  >(null);\n\n  useSafeEffect(async () => {\n    try {\n      if (client) {\n        const result = await client.clapButtons.info({ id, namespace });\n        setResponse(result.data);\n\n        if (onLoad) {\n          onLoad(camelizeKeys(result.data));\n        }\n      }\n    } catch (error) {\n      console.error('Lyket error:', error);\n      throw error;\n    }\n  }, [client, id, namespace]);\n\n  const handlePress = useCallback(\n    async (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      e.preventDefault();\n\n      try {\n        if (client) {\n          const result = await client.clapButtons.press({ id, namespace });\n          setResponse(result.data);\n\n          if (onPress) {\n            onPress(camelizeKeys(result.data));\n          }\n        }\n      } catch (error) {\n        console.error('Lyket error:', error);\n        throw error;\n      }\n    },\n    [client, id, namespace]\n  );\n\n  let isCounterVisible = true;\n\n  if (\n    !response ||\n    (hideCounterIfLessThan &&\n      response &&\n      response.attributes.total_claps < hideCounterIfLessThan)\n  ) {\n    isCounterVisible = false;\n  }\n\n  const props = {\n    isLoading: !response,\n    totalClaps: (response && response.attributes.total_claps) || 0,\n    userClaps: (response && response.attributes.user_claps) || 0,\n    handlePress,\n    isCounterVisible,\n  };\n\n  if (children) {\n    return children(props);\n  }\n\n  const Component = component || Simple;\n\n  return <Component {...props} />;\n};\n\nClapButton.templates = templates;\n\nexport { ClapButton };\n","import React from 'react';\n\ninterface Props {\n  className?: string;\n}\n\nexport const ThumbIcon = ({ className }: Props) => (\n  <svg id=\"ThumUpWiki\" viewBox=\"0 0 215.34 215.34\" className={className}>\n    <path d=\"M7.67,93.896h52.077V215.34H7.67V93.896z M207.67,106.682c-7.189-7.189-14.382-14.379-21.572-21.57h-41.451l9.877-25.102  l2.801-7.119l-0.258-2.049L151,2.33L121.115,0L110.15,37.822L80.954,85.176V215.34h107.89L207.67,106.682z\" />\n  </svg>\n);\n","import { ThemeUIStyleObject } from 'theme-ui';\n\nexport const style: Record<string, ThemeUIStyleObject> = {\n  root: {\n    color: 'inherit',\n    fontFamily: 'inherit',\n    display: 'inline-flex',\n    alignItems: 'center',\n  },\n  counter: {\n    ml: '.5em',\n    color: 'text',\n    fontFamily: 'body',\n    fontWeight: 'body',\n  },\n  icon: {\n    height: '1em',\n    display: 'block',\n    margin: '0 auto',\n    fill: 'text',\n  },\n  ring: {\n    opacity: '0',\n    width: `90%`,\n    height: `90%`,\n    borderRadius: `3em`,\n    border: `1px solid`,\n    borderColor: 'highlight',\n    boxSizing: 'border-box',\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n  },\n  button: {\n    border: 'none',\n    outline: 'none',\n    cursor: 'pointer',\n    background: 'transparent',\n    appearance: 'none',\n    position: 'relative',\n    fontSize: 'inherit',\n    borderRadius: '100%',\n    transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n    width: '3em',\n    height: '3em',\n    padding: '0',\n    lineHeight: '1em',\n  },\n};\n","export default {\n  buttons: {\n    inactive: {\n      backgroundColor: 'background',\n    },\n    active: {\n      transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n      backgroundColor: 'primary',\n    },\n  },\n};\n","/* @jsx jsx */\n\nimport { jsx, ThemeProvider } from 'theme-ui';\nimport { LikeButtonTemplateComponentProps } from '../..';\nimport { ThumbIcon } from './icons/ThumbIcon';\nimport { keyframes } from '@emotion/core';\nimport { FC, useCallback, useState } from 'react';\nimport { style } from './style';\nimport theme from './theme';\n\nconst iconScale = keyframes({\n  '0%': {\n    transform: 'scale(0)',\n  },\n  '52%': {\n    transform: 'scale(1.2)',\n  },\n  '72%': {\n    transform: 'scale(0.9)',\n  },\n  '100%': {\n    transform: 'scale(1)',\n  },\n});\n\nconst ringScale = keyframes({\n  '0%': {\n    opacity: '1',\n    borderWidth: '0.5em',\n  },\n  '52%': {\n    opacity: '0',\n    borderWidth: '0',\n  },\n});\n\nconst RING = {\n  durationMs: 600,\n  animation: ringScale,\n};\n\nconst ICON = {\n  animation: iconScale,\n  durationMs: 700,\n};\n\nexport const Simple: FC<LikeButtonTemplateComponentProps> = ({\n  isLoading,\n  userLiked,\n  totalLikes,\n  handlePress,\n  isCounterVisible,\n}) => {\n  const [animationActive, setAnimationActive] = useState<boolean>(false);\n\n  const handleClick = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      handlePress(e);\n\n      if (!userLiked) {\n        setAnimationActive(true);\n        setTimeout(() => setAnimationActive(false), ICON.durationMs);\n      }\n    },\n    [userLiked, handlePress]\n  );\n\n  const iconStyle = {\n    ...style.icon,\n    ...{\n      animation: animationActive\n        ? `${ICON.animation} ${ICON.durationMs}ms ease forwards`\n        : null,\n    },\n  };\n\n  const ringStyle = {\n    ...style.ring,\n    ...{\n      animation: animationActive\n        ? `${RING.animation} ${RING.durationMs}ms ease forwards`\n        : null,\n    },\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <div sx={style.root}>\n        <button\n          onClick={handleClick}\n          disabled={isLoading}\n          sx={{\n            ...style.button,\n            ...{\n              variant: userLiked ? 'buttons.active' : 'buttons.inactive',\n              '@media (hover: hover)': {\n                ':hover': {\n                  variant: 'buttons.active',\n                },\n              },\n            },\n          }}\n        >\n          <div sx={ringStyle} />\n          <ThumbIcon sx={iconStyle} />\n        </button>\n        {isCounterVisible && <div sx={style.counter}>{totalLikes}</div>}\n      </div>\n    </ThemeProvider>\n  );\n};\n","import React from 'react';\n\ninterface Props {\n  className?: string;\n}\n\nexport const TwitterHeartFull = ({ className }: Props) => (\n  <svg viewBox=\"0 0 24 24\" className={className}>\n    <g>\n      <path d=\"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12z\"></path>\n    </g>\n  </svg>\n);\n","import React from 'react';\n\ninterface Props {\n  className?: string;\n}\n\nexport const TwitterHeartEmpty = ({ className }: Props) => (\n  <svg viewBox=\"0 0 24 24\" className={className}>\n    <g>\n      <path d=\"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z\"></path>\n    </g>\n  </svg>\n);\n","import { ThemeUIStyleObject } from 'theme-ui';\n\nexport const style: Record<string, ThemeUIStyleObject> = {\n  root: {\n    color: 'inherit',\n    fontFamily: 'inherit',\n    display: 'inline-flex',\n    alignItems: 'center',\n  },\n  counter: {\n    ml: '.2em',\n  },\n  button: {\n    border: 'none',\n    outline: 'none',\n    cursor: 'pointer',\n    background: 'transparent',\n    appearance: 'none',\n    position: 'relative',\n    fontSize: 'inherit',\n    borderRadius: '100%',\n    transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n    width: '3em',\n    height: '3em',\n    padding: '0',\n    lineHeight: '1em',\n    '@media (hover: hover)': {\n      ':hover': {\n        transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n        backgroundColor: '#E5214A20',\n      },\n    },\n  },\n  dotsRotContainer: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n  },\n  dotsContainer: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%) rotate(165deg)',\n  },\n  ring: {\n    opacity: '0',\n    width: `90%`,\n    height: `90%`,\n    borderRadius: `3em`,\n    boxSizing: 'border-box',\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n  },\n  icon: {\n    height: '2em',\n    display: 'block',\n    margin: '0 auto',\n    animationTimingFunction: 'cubic-bezier(0.280, 0.840, 0.420, 1)',\n  },\n};\n","/* @jsx jsx */\n\nimport { jsx } from 'theme-ui';\nimport { LikeButtonTemplateComponentProps } from '../..';\nimport { TwitterHeartFull } from './icons/TwitterHeartFull';\nimport { TwitterHeartEmpty } from './icons/TwitterHeartEmpty';\nimport { keyframes } from '@emotion/core';\nimport { FC, useCallback, useState } from 'react';\nimport { style } from './style';\n\nconst dotBurst = keyframes({\n  '0%': {\n    opacity: '0',\n    transform: 'translateY(-0.5em) scale(1)',\n  },\n  '52%': {\n    opacity: '1',\n    transform: 'translateY(-1.6em) scale(1.3)',\n  },\n  '100%': {\n    transform: 'translateY(-2.7em) scale(0)',\n  },\n});\n\nconst iconScale = keyframes({\n  '0%': {\n    transform: 'scale(0)',\n  },\n  '52%': {\n    transform: 'scale(1.2)',\n  },\n  '72%': {\n    transform: 'scale(0.9)',\n  },\n  '100%': {\n    transform: 'scale(1)',\n  },\n});\n\nconst ringScale = keyframes({\n  '0%': {\n    opacity: '1',\n    borderWidth: '0.5em',\n  },\n  '52%': {\n    opacity: '0',\n    borderWidth: '0',\n  },\n});\n\nconst DOTS = {\n  count: 6,\n  size: 0.2,\n  colors: [\n    'lightcoral',\n    'yellow',\n    'pink',\n    'lightseagreen',\n    'orange',\n    'aliceblue',\n  ],\n  durationMs: 600,\n  animation: dotBurst,\n};\n\nconst RING = {\n  color: '#e095ed',\n  durationMs: DOTS.durationMs,\n  animation: ringScale,\n};\n\nconst HEART = {\n  animation: iconScale,\n  durationMs: 700,\n};\n\nexport const Twitter: FC<LikeButtonTemplateComponentProps> = ({\n  isLoading,\n  userLiked,\n  totalLikes,\n  handlePress,\n  isCounterVisible,\n}) => {\n  const [animationActive, setAnimationActive] = useState<boolean>(false);\n\n  const dots = [];\n  for (let i = 0; i < DOTS.count; i++) {\n    dots.push(\n      <div\n        key={i}\n        sx={{\n          transform: `rotate(${(360 / DOTS.count) * i}deg)`,\n          transformOrigin: `${DOTS.size}em 0`,\n          marginLeft: `-${DOTS.size}em`,\n        }}\n      >\n        <div\n          sx={{\n            opacity: '0',\n            width: `${DOTS.size}em`,\n            height: `${DOTS.size}em`,\n            borderRadius: `${DOTS.size}em`,\n            backgroundColor: `${DOTS.colors[i]}`,\n            position: 'absolute',\n            animation: animationActive\n              ? `${dotBurst} ${DOTS.durationMs}ms ease forwards`\n              : null,\n          }}\n        />\n      </div>\n    );\n  }\n\n  const ring = (\n    <div\n      sx={{\n        ...style.ring,\n        ...{\n          border: `1px solid ${RING.color}`,\n          animation: animationActive\n            ? `${RING.animation} ${RING.durationMs}ms ease forwards`\n            : null,\n        },\n      }}\n    />\n  );\n\n  const handleClick = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      if (!userLiked) {\n        setAnimationActive(true);\n        setTimeout(() => setAnimationActive(false), DOTS.durationMs);\n      }\n      handlePress(e);\n    },\n    [userLiked, handlePress]\n  );\n\n  const Icon = userLiked ? TwitterHeartFull : TwitterHeartEmpty;\n\n  return (\n    <div sx={style.root}>\n      <button onClick={handleClick} sx={style.button} disabled={isLoading}>\n        <div sx={style.dotsContainer}> {dots} </div>\n        <div sx={style.dotsRotContainer}> {dots} </div>\n        {ring}\n        <Icon\n          sx={{\n            ...style.icon,\n            ...{\n              fill: isLoading ? '#aaa' : '#E5214A',\n              animation: animationActive\n                ? `${HEART.animation} ${HEART.durationMs}ms ease forwards`\n                : null,\n            },\n          }}\n        />\n      </button>\n      {isCounterVisible && <div sx={style.counter}>{totalLikes}</div>}\n    </div>\n  );\n};\n","import React, { FC, useCallback, useContext, useState } from 'react';\nimport { ClientContext } from '../contexts/ClientContext';\nimport { useSafeEffect } from '../hooks/useSafeEffect';\nimport { Simple } from './templates/Simple';\nimport { Twitter } from './templates/Twitter';\nimport { camelizeKeys } from 'humps';\n\nconst templates = {\n  Simple,\n  Twitter,\n};\n\nexport interface LikeButtonTemplateComponentProps {\n  isLoading: boolean;\n  userLiked: boolean | undefined;\n  totalLikes: number | undefined;\n  handlePress: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n  isCounterVisible: boolean;\n}\n\ntype CallbackProps = Components.Schemas.LikeButton['data'];\n\nexport interface LikeButtonProps {\n  id: string;\n  namespace?: string;\n  hideCounterIfLessThan?: number;\n  onLoad?: (props: CallbackProps) => void;\n  onPress?: (props: CallbackProps) => void;\n  children?: (\n    props: LikeButtonTemplateComponentProps\n  ) => React.ReactElement<any, any> | null;\n  component?: React.ComponentType<LikeButtonTemplateComponentProps>;\n}\n\ntype FCWithTemplates<Props> = FC<Props> & {\n  templates: {\n    Simple: React.ComponentType<LikeButtonTemplateComponentProps>;\n    Twitter: React.ComponentType<LikeButtonTemplateComponentProps>;\n  };\n};\n\nconst LikeButton: FCWithTemplates<LikeButtonProps> = ({\n  id,\n  namespace,\n  hideCounterIfLessThan,\n  children,\n  component,\n  onLoad,\n  onPress,\n}) => {\n  const client = useContext(ClientContext);\n\n  const [response, setResponse] = useState<\n    Components.Schemas.LikeButton['data'] | null\n  >(null);\n\n  useSafeEffect(async () => {\n    try {\n      if (client) {\n        const result = await client.likeButtons.info({ id, namespace });\n        setResponse(result.data);\n\n        if (onLoad) {\n          onLoad(camelizeKeys(result.data));\n        }\n      }\n    } catch (error) {\n      console.error('Lyket error:', error);\n      throw error;\n    }\n  }, [client, id, namespace, onLoad]);\n\n  const handlePress = useCallback(\n    async (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      e.preventDefault();\n      if (!client) {\n        return;\n      }\n\n      try {\n        const result = await client.likeButtons.press({ id, namespace });\n        setResponse(result.data);\n\n        if (onPress) {\n          onPress(camelizeKeys(result.data));\n        }\n      } catch (error) {\n        console.error('Lyket error:', error);\n        throw error;\n      }\n    },\n    [client, id, namespace, onPress]\n  );\n\n  let isCounterVisible = true;\n\n  if (\n    !response ||\n    (hideCounterIfLessThan &&\n      response &&\n      response.attributes.total_likes < hideCounterIfLessThan)\n  ) {\n    isCounterVisible = false;\n  }\n\n  const props = {\n    isLoading: !response,\n    totalLikes: (response && response.attributes.total_likes) || 0,\n    userLiked: (response && response.attributes.user_has_liked) || false,\n    handlePress,\n    isCounterVisible,\n  };\n\n  if (children) {\n    return children(props);\n  }\n\n  const Component = component || Simple;\n\n  return <Component {...props} />;\n};\n\nLikeButton.templates = templates;\n\nexport { LikeButton };\n","import React from 'react';\n\ninterface Props {\n  className?: string;\n}\n\nexport const ThumbIcon = ({ className }: Props) => (\n  <svg viewBox=\"0 0 215.34 215.34\" className={className}>\n    <path d=\"M7.67,93.896h52.077V215.34H7.67V93.896z M207.67,106.682c-7.189-7.189-14.382-14.379-21.572-21.57h-41.451l9.877-25.102  l2.801-7.119l-0.258-2.049L151,2.33L121.115,0L110.15,37.822L80.954,85.176V215.34h107.89L207.67,106.682z\" />\n  </svg>\n);\n","import { ThemeUIStyleObject } from 'theme-ui';\n\nexport const style: Record<string, ThemeUIStyleObject> = {\n  root: {\n    color: 'inherit',\n    fontFamily: 'inherit',\n    display: 'inline-flex',\n    alignItems: 'center',\n  },\n  counter: {\n    ml: '.5em',\n    mr: '.5em',\n    minWidth: '2em',\n    color: 'text',\n    textAlign: 'center',\n    fontFamily: 'body',\n    fontWeight: 'body',\n  },\n  icon: {\n    height: '1em',\n    display: 'block',\n    margin: '0 auto',\n    fill: 'text',\n  },\n  ring: {\n    opacity: '0',\n    width: `90%`,\n    height: `90%`,\n    borderRadius: `3em`,\n    border: `1px solid`,\n    borderColor: 'highlight',\n    boxSizing: 'border-box',\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n  },\n  button: {\n    border: 'none',\n    outline: 'none',\n    cursor: 'pointer',\n    background: 'transparent',\n    appearance: 'none',\n    position: 'relative',\n    fontSize: 'inherit',\n    borderRadius: '100%',\n    transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n    width: '3em',\n    height: '3em',\n    padding: '0',\n    lineHeight: '1em',\n  },\n};\n","export default {\n  buttons: {\n    upInactive: {\n      backgroundColor: 'background',\n    },\n    upActive: {\n      backgroundColor: 'primary',\n      transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n    },\n    downInactive: {\n      backgroundColor: 'background',\n    },\n    downActive: {\n      transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n      backgroundColor: 'secondary',\n    },\n  },\n};\n","/* @jsx jsx */\n\nimport { jsx, ThemeProvider } from 'theme-ui';\nimport { UpdownButtonTemplateComponentProps } from '../..';\nimport { ThumbIcon } from './icons/ThumbIcon';\nimport { keyframes } from '@emotion/core';\nimport { FC, useCallback, useState } from 'react';\nimport { style } from './style';\nimport theme from './theme';\n\nconst iconScale = keyframes({\n  '0%': {\n    transform: 'scale(0)',\n  },\n  '52%': {\n    transform: 'scale(1.2)',\n  },\n  '72%': {\n    transform: 'scale(0.9)',\n  },\n  '100%': {\n    transform: 'scale(1)',\n  },\n});\n\nconst ringScale = keyframes({\n  '0%': {\n    opacity: '1',\n    borderWidth: '0.5em',\n  },\n  '52%': {\n    opacity: '0',\n    borderWidth: '0',\n  },\n});\n\nconst RING = {\n  durationMs: 600,\n  animation: ringScale,\n};\n\nconst ICON = {\n  animation: iconScale,\n  durationMs: 700,\n};\n\nexport const Simple: FC<UpdownButtonTemplateComponentProps> = ({\n  isLoading,\n  userVoteDirection,\n  totalScore,\n  handlePressUp,\n  handlePressDown,\n  isCounterVisible,\n}) => {\n  const [animationActiveUp, setAnimationActiveUp] = useState<boolean>(false);\n  const [animationActiveDown, setAnimationActiveDown] = useState<boolean>(\n    false\n  );\n\n  const handleClickUp = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      handlePressUp(e);\n\n      if (userVoteDirection !== 1) {\n        setAnimationActiveUp(true);\n        setTimeout(() => setAnimationActiveUp(false), ICON.durationMs);\n      }\n    },\n    [userVoteDirection, handlePressUp]\n  );\n\n  const handleClickDown = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      handlePressDown(e);\n\n      if (userVoteDirection !== -1) {\n        setAnimationActiveDown(true);\n        setTimeout(() => setAnimationActiveDown(false), ICON.durationMs);\n      }\n    },\n    [userVoteDirection, handlePressDown]\n  );\n\n  const iconStyleUp = {\n    ...style.icon,\n    ...{\n      animation: animationActiveUp\n        ? `${ICON.animation} ${ICON.durationMs}ms ease forwards`\n        : null,\n    },\n  };\n\n  const iconStyleDown = {\n    ...style.icon,\n    ...{\n      animation: animationActiveDown\n        ? `${ICON.animation} ${ICON.durationMs}ms ease forwards`\n        : null,\n    },\n  };\n\n  const ringStyleUp = {\n    ...style.ring,\n    ...{\n      animation: animationActiveUp\n        ? `${RING.animation} ${RING.durationMs}ms ease forwards`\n        : null,\n    },\n  };\n\n  const ringStyleDown = {\n    ...style.ring,\n    ...{\n      animation: animationActiveDown\n        ? `${RING.animation} ${RING.durationMs}ms ease forwards`\n        : null,\n    },\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <div sx={style.root}>\n        <button\n          onClick={handleClickUp}\n          disabled={isLoading}\n          sx={{\n            ...style.button,\n            ...{\n              variant:\n                userVoteDirection === 1\n                  ? 'buttons.upActive'\n                  : 'buttons.upInactive',\n              '@media (hover: hover)': {\n                ':hover': {\n                  variant: 'buttons.upActive',\n                },\n              },\n            },\n          }}\n        >\n          <div sx={ringStyleUp} />\n          <ThumbIcon sx={iconStyleUp} />\n        </button>\n        {isCounterVisible && <div sx={style.counter}>{totalScore}</div>}\n        {isLoading && <div sx={style.counter}>-</div>}\n        <button\n          onClick={handleClickDown}\n          disabled={isLoading}\n          sx={{\n            ...style.button,\n            ...{\n              transform: 'rotate(180deg)',\n              variant:\n                userVoteDirection === -1\n                  ? 'buttons.downActive'\n                  : 'buttons.downInactive',\n              '@media (hover: hover)': {\n                ':hover': {\n                  variant: 'buttons.downActive',\n                },\n              },\n            },\n          }}\n        >\n          <div sx={ringStyleDown} />\n          <ThumbIcon sx={iconStyleDown} />\n        </button>\n      </div>\n    </ThemeProvider>\n  );\n};\n","import React from 'react';\n\ninterface Props {\n  className?: string;\n}\n\nexport const RedditArrow = ({ className }: Props) => (\n  <svg\n    version=\"1.0\"\n    viewBox=\"0 0 1280 1280\"\n    className={className}\n    preserveAspectRatio=\"xMidYMid meet\"\n  >\n    <g transform=\"translate(0,1280) scale(0.100000,-0.100000)\" stroke=\"none\">\n      <path\n        d=\"M6245 12778 c-200 -44 -333 -117 -494 -272 -53 -51 -1149 -1102\n  -2436 -2336 -3028 -2904 -3071 -2945 -3122 -3010 -133 -170 -219 -465 -183\n  -629 35 -159 45 -192 80 -267 50 -109 104 -185 187 -265 83 -81 140 -119 246\n  -169 175 -81 33 -74 1677 -77 1359 -3 1466 -4 1478 -20 9 -13 12 -527 12\n  -2487 0 -2658 -2 -2524 50 -2663 84 -226 259 -410 479 -503 40 -17 123 -42\n  184 -56 l112 -24 1905 3 c1897 2 1905 2 1995 23 173 41 319 120 439 238 104\n  102 171 212 222 366 l29 85 5 2507 c3 1701 8 2510 15 2517 7 7 487 12 1475 13\n  1644 4 1502 -3 1677 78 104 48 161 88 247 169 137 131 213 277 256 491 25 119\n  25 151 0 270 -32 159 -75 262 -155 375 -53 75 -26 49 -3010 2910 -1353 1297\n  -2506 2402 -2561 2456 -169 163 -299 234 -509 278 -119 25 -181 25 -300 -1z\"\n      />\n    </g>\n  </svg>\n);\n","import { ThemeUIStyleObject } from 'theme-ui';\n\nexport const style: Record<string, ThemeUIStyleObject> = {\n  root: {\n    color: 'inherit',\n    fontFamily: 'inherit',\n    display: 'inline-flex',\n    alignItems: 'center',\n    flexDirection: 'column',\n  },\n  counter: {\n    mt: '.2em',\n    mb: '.2em',\n    minWidth: '2em',\n    textAlign: 'center',\n  },\n  icon: {\n    height: '1em',\n    display: 'block',\n    margin: '0 auto',\n    animationTimingFunction: 'cubic-bezier(0.280, 0.840, 0.420, 1)',\n  },\n  button: {\n    border: 'none',\n    outline: 'none',\n    cursor: 'pointer',\n    background: 'transparent',\n    appearance: 'none',\n    position: 'relative',\n    fontSize: 'inherit',\n    borderRadius: '3px',\n    transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n    width: '2em',\n    height: '2em',\n    padding: '0',\n    lineHeight: '1em',\n  },\n};\n","export default {\n  colors: {\n    lightGray: '#25252510',\n    darkGray: '#878a8c',\n    blue: '#5a75cc',\n    red: '#cc3700',\n  },\n  buttons: {\n    downInactive: {\n      svg: {\n        fill: 'darkGray',\n      },\n    },\n    upInactive: {\n      svg: {\n        fill: 'darkGray',\n      },\n    },\n    upActive: {\n      backgroundColor: 'lightGray',\n      svg: {\n        fill: 'red',\n      },\n    },\n    downActive: {\n      backgroundColor: 'lightGray',\n      svg: {\n        fill: 'blue',\n      },\n    },\n  },\n};\n","/* @jsx jsx */\n\nimport { jsx, ThemeProvider } from 'theme-ui';\nimport { UpdownButtonTemplateComponentProps } from '../..';\nimport { RedditArrow } from './icons/RedditArrow';\nimport { keyframes } from '@emotion/core';\nimport { FC, useCallback, useState } from 'react';\nimport { style } from './style';\nimport theme from './theme';\n\nconst iconScale = keyframes({\n  '0%': {\n    transform: 'scale(0)',\n  },\n  '52%': {\n    transform: 'scale(1.2)',\n  },\n  '72%': {\n    transform: 'scale(0.9)',\n  },\n  '100%': {\n    transform: 'scale(1)',\n  },\n});\n\nconst ICON = {\n  animation: iconScale,\n  durationMs: 700,\n};\n\nexport const Reddit: FC<UpdownButtonTemplateComponentProps> = ({\n  isLoading,\n  userVoteDirection,\n  totalScore,\n  handlePressUp,\n  handlePressDown,\n  isCounterVisible,\n}) => {\n  const [animationActiveUp, setAnimationActiveUp] = useState<boolean>(false);\n  const [animationActiveDown, setAnimationActiveDown] = useState<boolean>(\n    false\n  );\n\n  const handleClickUp = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      handlePressUp(e);\n\n      if (userVoteDirection !== 1) {\n        setAnimationActiveUp(true);\n        setTimeout(() => setAnimationActiveUp(false), ICON.durationMs);\n      }\n    },\n    [userVoteDirection, handlePressUp]\n  );\n\n  const handleClickDown = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      handlePressDown(e);\n\n      if (userVoteDirection !== -1) {\n        setAnimationActiveDown(true);\n        setTimeout(() => setAnimationActiveDown(false), ICON.durationMs);\n      }\n    },\n    [userVoteDirection, handlePressDown]\n  );\n\n  const iconStyleUp = {\n    ...style.icon,\n    ...{\n      animation: animationActiveUp\n        ? `${ICON.animation} ${ICON.durationMs}ms ease forwards`\n        : null,\n    },\n  };\n\n  const iconStyleDown = {\n    ...style.icon,\n    ...{\n      animation: animationActiveDown\n        ? `${ICON.animation} ${ICON.durationMs}ms ease forwards`\n        : null,\n    },\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <div sx={style.root}>\n        <button\n          onClick={handleClickUp}\n          disabled={isLoading}\n          sx={{\n            ...style.button,\n            ...{\n              variant:\n                userVoteDirection === 1\n                  ? 'buttons.upActive'\n                  : 'buttons.upInactive',\n              '@media (hover: hover)': {\n                ':hover': {\n                  variant: 'buttons.upActive',\n                  transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                },\n              },\n            },\n          }}\n        >\n          <RedditArrow sx={iconStyleUp} />\n        </button>\n        {isCounterVisible && <div sx={style.counter}>{totalScore}</div>}\n        {isLoading && <div sx={style.counter}>-</div>}\n        <button\n          onClick={handleClickDown}\n          disabled={isLoading}\n          sx={{\n            ...style.button,\n            ...{\n              transform: 'rotate(180deg)',\n              variant:\n                userVoteDirection === -1\n                  ? 'buttons.downActive'\n                  : 'buttons.downInactive',\n              '@media (hover: hover)': {\n                ':hover': {\n                  variant: 'buttons.downActive',\n                  transition: 'all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n                },\n              },\n            },\n          }}\n        >\n          <RedditArrow sx={iconStyleDown} />\n        </button>\n      </div>\n    </ThemeProvider>\n  );\n};\n","import React, { FC, useCallback, useContext, useState } from 'react';\nimport { ClientContext } from '../contexts/ClientContext';\nimport { useSafeEffect } from '../hooks/useSafeEffect';\nimport { Simple } from './templates/Simple';\nimport { Reddit } from './templates/Reddit';\nimport { camelizeKeys } from 'humps';\n\nconst templates = {\n  Simple,\n  Reddit,\n};\n\nexport interface UpdownButtonTemplateComponentProps {\n  isLoading: boolean;\n  userVoteDirection: number | undefined;\n  totalScore: number | undefined;\n  handlePressUp: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n  handlePressDown: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n  isCounterVisible: boolean;\n}\n\ntype CallbackProps = Components.Schemas.UpdownButton['data'];\n\nexport interface UpdownButtonProps {\n  id: string;\n  namespace?: string;\n  hideCounterIfLessThan?: number;\n  onLoad?: (props: CallbackProps) => void;\n  onPressUp?: (props: CallbackProps) => void;\n  onPressDown?: (props: CallbackProps) => void;\n  children?: (\n    props: UpdownButtonTemplateComponentProps\n  ) => React.ReactElement<any, any> | null;\n  component?: React.ComponentType<UpdownButtonTemplateComponentProps>;\n}\n\ntype FCWithTemplates<Props> = FC<Props> & {\n  templates: {\n    Simple: React.ComponentType<UpdownButtonTemplateComponentProps>;\n    Reddit: React.ComponentType<UpdownButtonTemplateComponentProps>;\n  };\n};\n\nconst UpdownButton: FCWithTemplates<UpdownButtonProps> = ({\n  id,\n  namespace,\n  hideCounterIfLessThan,\n  children,\n  component,\n  onLoad,\n  onPressUp,\n  onPressDown,\n}) => {\n  const client = useContext(ClientContext);\n\n  const [response, setResponse] = useState<\n    Components.Schemas.UpdownButton['data'] | null\n  >(null);\n\n  useSafeEffect(async () => {\n    try {\n      if (client) {\n        const result = await client.updownButtons.info({ id, namespace });\n        setResponse(result.data);\n\n        if (onLoad) {\n          onLoad(camelizeKeys(result.data));\n        }\n      }\n    } catch (error) {\n      console.error('Lyket error:', error);\n      throw error;\n    }\n  }, [client, id, namespace, onLoad]);\n\n  const handlePressUp = useCallback(\n    async (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      e.preventDefault();\n\n      try {\n        if (client) {\n          const result = await client.updownButtons.pressUp({\n            id,\n            namespace,\n          });\n          setResponse(result.data);\n\n          if (onPressUp) {\n            onPressUp(camelizeKeys(result.data));\n          }\n        }\n      } catch (error) {\n        console.error('Lyket error:', error);\n        throw error;\n      }\n    },\n    [client, id, namespace, onPressUp]\n  );\n\n  const handlePressDown = useCallback(\n    async (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      e.preventDefault();\n\n      try {\n        if (client) {\n          const result = await client.updownButtons.pressDown({\n            id,\n            namespace,\n          });\n          setResponse(result.data);\n\n          if (onPressDown) {\n            onPressDown(camelizeKeys(result.data));\n          }\n        }\n      } catch (error) {\n        console.error('Lyket error:', error);\n        throw error;\n      }\n    },\n    [client, id, namespace, onPressDown]\n  );\n\n  let isCounterVisible = true;\n\n  if (\n    !response ||\n    (hideCounterIfLessThan &&\n      response &&\n      response.attributes.total_score < hideCounterIfLessThan)\n  ) {\n    isCounterVisible = false;\n  }\n\n  const props = {\n    isLoading: !response,\n    totalScore: (response && response.attributes.total_score) || 0,\n    userVoteDirection:\n      (response && response.attributes.user_vote_direction) || 0,\n    handlePressUp,\n    handlePressDown,\n    isCounterVisible,\n  };\n\n  if (children) {\n    return children(props);\n  }\n\n  const Component = component || Simple;\n\n  return <Component {...props} />;\n};\n\nUpdownButton.templates = templates;\n\nexport { UpdownButton };\n"],"names":["getSessionId","window","Error","legacySessionId","localStorage","getItem","setItem","removeItem","sessionId","newSessionId","Math","random","toString","substring","_iteratorSymbol","Symbol","iterator","_asyncIteratorSymbol","asyncIterator","_catch","body","recover","result","e","then","lazyLoadScript","src","opts","Promise","resolve","reject","async","integrity","type","sc","document","querySelector","script","createElement","setAttribute","onload","onerror","event","appendChild","generateRecaptchaToken","siteKey","action","grecaptcha","ready","execute","token","console","error","ApiError","requestInfo","requestInit","response","status","now","Date","getTime","debounceCollect","func","wait","call","args","results","i","length","deferreds","onTimeout","elapsed","timestamp","timer","setTimeout","reset","debounced","callArgs","push","LikeButtonClient","client","press","id","namespace","put","info","enqueueToBatch","ClapButtonClient","UpdownButtonClient","pressUp","pressDown","Client","apiKey","recaptchaSiteKey","baseUrl","disableSessionId","likeButtons","clapButtons","updownButtons","batch","bind","get","url","request","calls","method","data","attributes","urls","map","responses","recaptchaAction","input","init","headers","defaultHeaders","JSON","stringify","fetch","json","Accept","Authorization","ClientContext","React","createContext","defaultTheme","colors","background","text","primary","secondary","highlight","fonts","clientInstances","getClientInstanceForSettings","settings","key","Provider","children","customTheme","theme","useState","setClient","useEffect","jsx","ThemeProvider","useBodyStyles","useLocalStorage","styles","value","useSafeEffect","effect","deps","setState","safeRunner","ClapFull","className","viewBox","d","style","root","color","fontFamily","display","alignItems","counter","ml","fontWeight","icon","height","margin","fill","ring","opacity","width","borderRadius","border","borderColor","boxSizing","position","top","left","transform","button","outline","cursor","appearance","fontSize","transition","padding","lineHeight","baloon","justifyContent","backgroundColor","centeredContainer","buttons","inactive","active","baloonFade","keyframes","iconScale","ringScale","borderWidth","BALOON","durationMs","animation","ICON","RING","Simple","isLoading","userClaps","totalClaps","handlePress","isCounterVisible","animationActive","setAnimationActive","timeoutId","useRef","handleClick","useCallback","current","clearTimeout","ringStyle","sx","onClick","variant","disabled","ClapEmpty","fillRule","p","svg","triangleFade","TRIANGLES","count","size","CIRCLES","Medium","triangles","transformOrigin","marginLeft","borderLeft","borderRight","borderTop","circles","Icon","templates","ClapButton","hideCounterIfLessThan","component","onLoad","onPress","useContext","setResponse","camelizeKeys","preventDefault","total_claps","props","user_claps","Component","ThumbIcon","userLiked","totalLikes","iconStyle","TwitterHeartFull","TwitterHeartEmpty","dotsRotContainer","dotsContainer","animationTimingFunction","dotBurst","DOTS","HEART","Twitter","dots","LikeButton","total_likes","user_has_liked","mr","minWidth","textAlign","upInactive","upActive","downInactive","downActive","userVoteDirection","totalScore","handlePressUp","handlePressDown","animationActiveUp","setAnimationActiveUp","animationActiveDown","setAnimationActiveDown","handleClickUp","handleClickDown","iconStyleUp","iconStyleDown","ringStyleUp","ringStyleDown","RedditArrow","version","preserveAspectRatio","stroke","flexDirection","mt","mb","lightGray","darkGray","blue","red","Reddit","UpdownButton","onPressUp","onPressDown","total_score","user_vote_direction"],"mappings":"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"}