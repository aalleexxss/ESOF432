{"version":3,"file":"index.umd.js","sources":["../src/options.ts","../src/index.ts"],"sourcesContent":["import { Theme } from './types'\n\n/**\n * @internal\n * We fall back to `theme.useBodyStyles` when `theme.useRootStyles` is not set.\n */\nexport function __internalGetUseRootStyles(theme: Theme = {}) {\n  const { useRootStyles, useBodyStyles } = theme\n  const root = 'useRootStyles' in theme && useRootStyles != null\n\n  return {\n    scope: root ? 'html' : 'body',\n    rootStyles: root ? useRootStyles : useBodyStyles,\n  }\n}\n","import {\n  CSSObject,\n  ThemeUIStyleObject,\n  ThemeDerivedStyles,\n  Theme,\n  ThemeUICSSObject,\n} from './types'\n\nexport * from './types'\nexport { __internalGetUseRootStyles } from './options'\n\n/**\n * Allows for nested scales with shorthand values\n * @example\n * {\n *   colors: {\n *     primary: { __default: '#00f', light: '#33f' }\n *   }\n * }\n * css({ color: 'primary' }); // { color: '#00f' }\n * css({ color: 'primary.light' }) // { color: '#33f' }\n */\nexport const THEME_UI_DEFAULT_KEY = '__default'\n\nconst hasDefault = (\n  x: unknown\n): x is { [THEME_UI_DEFAULT_KEY]: string | number } => {\n  return typeof x === 'object' && x !== null && THEME_UI_DEFAULT_KEY in x\n}\n\n/**\n * Extracts value under path from a deeply nested object.\n * Used for Themes, variants and Theme UI style objects.\n * Given a path to object with `__default` key, returns the value under that key.\n *\n * @param obj a theme, variant or style object\n * @param path path separated with dots (`.`)\n * @param fallback default value returned if get(obj, path) is not found\n */\nexport function get(\n  obj: object,\n  path: string | number | undefined,\n  fallback?: unknown,\n  p?: number,\n  undef?: unknown\n): any {\n  const pathArray = path && typeof path === 'string' ? path.split('.') : [path]\n  for (p = 0; p < pathArray.length; p++) {\n    obj = obj ? (obj as any)[pathArray[p]!] : undef\n  }\n\n  if (obj === undef) return fallback\n\n  return hasDefault(obj) ? obj[THEME_UI_DEFAULT_KEY] : obj\n}\n\nexport const getObjectWithVariants = (obj: any, theme: Theme): CSSObject => {\n  if (obj && obj['variant']) {\n    let result: CSSObject = {}\n    for (const key in obj) {\n      const x = obj[key]\n      if (key === 'variant') {\n        const val = typeof x === 'function' ? x(theme) : x\n        const variant = getObjectWithVariants(get(theme, val as string), theme)\n        result = { ...result, ...variant }\n      } else {\n        result[key] = x as CSSObject\n      }\n    }\n    return result\n  }\n  return obj as CSSObject\n}\n\nexport const defaultBreakpoints = [40, 52, 64].map((n) => n + 'em')\n\nconst defaultTheme = {\n  space: [0, 4, 8, 16, 32, 64, 128, 256, 512],\n  fontSizes: [12, 14, 16, 20, 24, 32, 48, 64, 72],\n}\n\nconst aliases = {\n  bg: 'backgroundColor',\n  m: 'margin',\n  mt: 'marginTop',\n  mr: 'marginRight',\n  mb: 'marginBottom',\n  ml: 'marginLeft',\n  mx: 'marginX',\n  my: 'marginY',\n  p: 'padding',\n  pt: 'paddingTop',\n  pr: 'paddingRight',\n  pb: 'paddingBottom',\n  pl: 'paddingLeft',\n  px: 'paddingX',\n  py: 'paddingY',\n} as const\ntype Aliases = typeof aliases\n\nexport const multiples = {\n  marginX: ['marginLeft', 'marginRight'],\n  marginY: ['marginTop', 'marginBottom'],\n  paddingX: ['paddingLeft', 'paddingRight'],\n  paddingY: ['paddingTop', 'paddingBottom'],\n  scrollPaddingX: ['scrollPaddingLeft', 'scrollPaddingRight'],\n  scrollPaddingY: ['scrollPaddingTop', 'scrollPaddingBottom'],\n  size: ['width', 'height'],\n}\n\nexport const scales = {\n  color: 'colors',\n  backgroundColor: 'colors',\n  borderColor: 'colors',\n  caretColor: 'colors',\n  columnRuleColor: 'colors',\n  opacity: 'opacities',\n  transition: 'transitions',\n  margin: 'space',\n  marginTop: 'space',\n  marginRight: 'space',\n  marginBottom: 'space',\n  marginLeft: 'space',\n  marginX: 'space',\n  marginY: 'space',\n  marginBlock: 'space',\n  marginBlockEnd: 'space',\n  marginBlockStart: 'space',\n  marginInline: 'space',\n  marginInlineEnd: 'space',\n  marginInlineStart: 'space',\n  padding: 'space',\n  paddingTop: 'space',\n  paddingRight: 'space',\n  paddingBottom: 'space',\n  paddingLeft: 'space',\n  paddingX: 'space',\n  paddingY: 'space',\n  paddingBlock: 'space',\n  paddingBlockEnd: 'space',\n  paddingBlockStart: 'space',\n  paddingInline: 'space',\n  paddingInlineEnd: 'space',\n  paddingInlineStart: 'space',\n  scrollPadding: 'space',\n  scrollPaddingTop: 'space',\n  scrollPaddingRight: 'space',\n  scrollPaddingBottom: 'space',\n  scrollPaddingLeft: 'space',\n  scrollPaddingX: 'space',\n  scrollPaddingY: 'space',\n  inset: 'space',\n  insetBlock: 'space',\n  insetBlockEnd: 'space',\n  insetBlockStart: 'space',\n  insetInline: 'space',\n  insetInlineEnd: 'space',\n  insetInlineStart: 'space',\n  top: 'space',\n  right: 'space',\n  bottom: 'space',\n  left: 'space',\n  gridGap: 'space',\n  gridColumnGap: 'space',\n  gridRowGap: 'space',\n  gap: 'space',\n  columnGap: 'space',\n  rowGap: 'space',\n  fontFamily: 'fonts',\n  fontSize: 'fontSizes',\n  fontWeight: 'fontWeights',\n  lineHeight: 'lineHeights',\n  letterSpacing: 'letterSpacings',\n  border: 'borders',\n  borderTop: 'borders',\n  borderRight: 'borders',\n  borderBottom: 'borders',\n  borderLeft: 'borders',\n  borderWidth: 'borderWidths',\n  borderStyle: 'borderStyles',\n  borderRadius: 'radii',\n  borderTopRightRadius: 'radii',\n  borderTopLeftRadius: 'radii',\n  borderBottomRightRadius: 'radii',\n  borderBottomLeftRadius: 'radii',\n  borderTopWidth: 'borderWidths',\n  borderTopColor: 'colors',\n  borderTopStyle: 'borderStyles',\n  borderBottomWidth: 'borderWidths',\n  borderBottomColor: 'colors',\n  borderBottomStyle: 'borderStyles',\n  borderLeftWidth: 'borderWidths',\n  borderLeftColor: 'colors',\n  borderLeftStyle: 'borderStyles',\n  borderRightWidth: 'borderWidths',\n  borderRightColor: 'colors',\n  borderRightStyle: 'borderStyles',\n  borderBlock: 'borders',\n  borderBlockEnd: 'borders',\n  borderBlockEndStyle: 'borderStyles',\n  borderBlockEndWidth: 'borderWidths',\n  borderBlockStart: 'borders',\n  borderBlockStartStyle: 'borderStyles',\n  borderBlockStartWidth: 'borderWidths',\n  borderBlockStyle: 'borderStyles',\n  borderBlockWidth: 'borderWidths',\n  borderEndEndRadius: 'radii',\n  borderEndStartRadius: 'radii',\n  borderInline: 'borders',\n  borderInlineEnd: 'borders',\n  borderInlineEndStyle: 'borderStyles',\n  borderInlineEndWidth: 'borderWidths',\n  borderInlineStart: 'borders',\n  borderInlineStartStyle: 'borderStyles',\n  borderInlineStartWidth: 'borderWidths',\n  borderInlineStyle: 'borderStyles',\n  borderInlineWidth: 'borderWidths',\n  borderStartEndRadius: 'radii',\n  borderStartStartRadius: 'radii',\n  outlineColor: 'colors',\n  boxShadow: 'shadows',\n  textShadow: 'shadows',\n  zIndex: 'zIndices',\n  width: 'sizes',\n  minWidth: 'sizes',\n  maxWidth: 'sizes',\n  height: 'sizes',\n  minHeight: 'sizes',\n  maxHeight: 'sizes',\n  flexBasis: 'sizes',\n  size: 'sizes',\n  blockSize: 'sizes',\n  inlineSize: 'sizes',\n  maxBlockSize: 'sizes',\n  maxInlineSize: 'sizes',\n  minBlockSize: 'sizes',\n  minInlineSize: 'sizes',\n  // svg\n  fill: 'colors',\n  stroke: 'colors',\n} as const\ntype Scales = typeof scales\n\nconst positiveOrNegative = (scale: object, value: string | number) => {\n  if (typeof value !== 'number' || value >= 0) {\n    if (typeof value === 'string' && value.startsWith('-')) {\n      const valueWithoutMinus = value.substring(1)\n      const n = get(scale, valueWithoutMinus, valueWithoutMinus)\n      return `-${n}`\n    }\n    return get(scale, value, value)\n  }\n  const absolute = Math.abs(value)\n  const n = get(scale, absolute, absolute)\n  if (typeof n === 'string') return '-' + n\n  return Number(n) * -1\n}\n\nconst transforms = [\n  'margin',\n  'marginTop',\n  'marginRight',\n  'marginBottom',\n  'marginLeft',\n  'marginX',\n  'marginY',\n  'marginBlock',\n  'marginBlockEnd',\n  'marginBlockStart',\n  'marginInline',\n  'marginInlineEnd',\n  'marginInlineStart',\n  'top',\n  'bottom',\n  'left',\n  'right',\n].reduce(\n  (acc, curr) => ({\n    ...acc,\n    [curr]: positiveOrNegative,\n  }),\n  {}\n)\n\nconst responsive = (\n  styles: Exclude<ThemeUIStyleObject, ThemeDerivedStyles>\n) => (theme?: Theme) => {\n  const next: Exclude<ThemeUIStyleObject, ThemeDerivedStyles> = {}\n  const breakpoints =\n    (theme && (theme.breakpoints as string[])) || defaultBreakpoints\n  const mediaQueries = [\n    null,\n    ...breakpoints.map((n) => `@media screen and (min-width: ${n})`),\n  ]\n\n  for (const k in styles) {\n    const key = k as keyof typeof styles\n    let value = styles[key]\n    if (typeof value === 'function') {\n      value = value(theme || {})\n    }\n\n    if (value === false || value == null) {\n      continue\n    }\n    if (!Array.isArray(value)) {\n      next[key] = value\n      continue\n    }\n    for (let i = 0; i < value.slice(0, mediaQueries.length).length; i++) {\n      const media = mediaQueries[i]\n      if (!media) {\n        next[key] = value[i]\n        continue\n      }\n      next[media] = next[media] || {}\n      if (value[i] == null) continue\n      ;(next[media] as Record<string, any>)[key] = value[i]\n    }\n  }\n  return next\n}\n\ntype CssPropsArgument = { theme: Theme } | Theme\n\nexport const css = (args: ThemeUIStyleObject = {}) => (\n  props: CssPropsArgument = {}\n): CSSObject => {\n  const theme: Theme = {\n    ...defaultTheme,\n    ...('theme' in props ? props.theme : props),\n  }\n  // insert variant props before responsive styles, so they can be merged\n  // we need to maintain order of the style props, so if a variant is place in the middle\n  // of other props, it will extends its props at that same location order.\n\n  const obj: CSSObject = getObjectWithVariants(\n    typeof args === 'function' ? args(theme) : args,\n    theme\n  )\n\n  const styles = responsive(obj as ThemeUICSSObject)(theme)\n  let result: CSSObject = {}\n  for (const key in styles) {\n    const x = styles[key as keyof typeof styles]\n    const val = typeof x === 'function' ? x(theme) : x\n\n    if (val && typeof val === 'object') {\n      if (hasDefault(val)) {\n        result[key] = val[THEME_UI_DEFAULT_KEY]\n        continue\n      }\n\n      // On type level, val can also be an array here,\n      // but we transform all arrays in `responsive` function.\n      result[key] = css(val as ThemeUICSSObject)(theme)\n      continue\n    }\n\n    const prop = key in aliases ? aliases[key as keyof Aliases] : key\n    const scaleName = prop in scales ? scales[prop as keyof Scales] : undefined\n    const scale = scaleName ? theme?.[scaleName] : get(theme, prop, {})\n    const transform = get(transforms, prop, get)\n    const value = transform(scale, val, val)\n\n    if (prop in multiples) {\n      const dirs = multiples[prop as keyof typeof multiples]\n\n      for (let i = 0; i < dirs.length; i++) {\n        result[dirs[i]] = value\n      }\n    } else {\n      result[prop] = value\n    }\n  }\n\n  return result\n}\n"],"names":["__internalGetUseRootStyles","theme","useRootStyles","useBodyStyles","root","scope","rootStyles","THEME_UI_DEFAULT_KEY","hasDefault","x","get","obj","path","fallback","p","undef","pathArray","split","length","getObjectWithVariants","result","key","val","variant","defaultBreakpoints","map","n","defaultTheme","space","fontSizes","aliases","bg","m","mt","mr","mb","ml","mx","my","pt","pr","pb","pl","px","py","multiples","marginX","marginY","paddingX","paddingY","scrollPaddingX","scrollPaddingY","size","scales","color","backgroundColor","borderColor","caretColor","columnRuleColor","opacity","transition","margin","marginTop","marginRight","marginBottom","marginLeft","marginBlock","marginBlockEnd","marginBlockStart","marginInline","marginInlineEnd","marginInlineStart","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingBlock","paddingBlockEnd","paddingBlockStart","paddingInline","paddingInlineEnd","paddingInlineStart","scrollPadding","scrollPaddingTop","scrollPaddingRight","scrollPaddingBottom","scrollPaddingLeft","inset","insetBlock","insetBlockEnd","insetBlockStart","insetInline","insetInlineEnd","insetInlineStart","top","right","bottom","left","gridGap","gridColumnGap","gridRowGap","gap","columnGap","rowGap","fontFamily","fontSize","fontWeight","lineHeight","letterSpacing","border","borderTop","borderRight","borderBottom","borderLeft","borderWidth","borderStyle","borderRadius","borderTopRightRadius","borderTopLeftRadius","borderBottomRightRadius","borderBottomLeftRadius","borderTopWidth","borderTopColor","borderTopStyle","borderBottomWidth","borderBottomColor","borderBottomStyle","borderLeftWidth","borderLeftColor","borderLeftStyle","borderRightWidth","borderRightColor","borderRightStyle","borderBlock","borderBlockEnd","borderBlockEndStyle","borderBlockEndWidth","borderBlockStart","borderBlockStartStyle","borderBlockStartWidth","borderBlockStyle","borderBlockWidth","borderEndEndRadius","borderEndStartRadius","borderInline","borderInlineEnd","borderInlineEndStyle","borderInlineEndWidth","borderInlineStart","borderInlineStartStyle","borderInlineStartWidth","borderInlineStyle","borderInlineWidth","borderStartEndRadius","borderStartStartRadius","outlineColor","boxShadow","textShadow","zIndex","width","minWidth","maxWidth","height","minHeight","maxHeight","flexBasis","blockSize","inlineSize","maxBlockSize","maxInlineSize","minBlockSize","minInlineSize","fill","stroke","positiveOrNegative","scale","value","startsWith","valueWithoutMinus","substring","absolute","Math","abs","Number","transforms","reduce","acc","curr","responsive","styles","next","breakpoints","mediaQueries","k","Array","isArray","i","slice","media","css","args","props","prop","scaleName","undefined","transform","dirs"],"mappings":"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"}